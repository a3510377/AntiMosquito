var P=Object.defineProperty;var O=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var q=(o,e,i)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,v=(o,e)=>{for(var i in e||(e={}))V.call(e,i)&&q(o,i,e[i]);if(O)for(var i of O(e))j.call(e,i)&&q(o,i,e[i]);return o};import{d as y,r as g,c as S,a,b as x,w as U,p as I,e as L,o as b,f as z,g as B,h as H,F as W,V as G,i as Y,G as R,P as D,l as M,s as C,T as E,S as h,C as J,j as w,k as p,M as K,m as Q,A as X,n as A,q as T,t as Z,u as ee,v as te,x as oe}from"./vendor.645ecb24.js";const ne=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(n){if(n.ep)return;n.ep=!0;const s=i(n);fetch(n.href,s)}};ne();var $=(o,e)=>{const i=o.__vccOpts||o;for(const[t,n]of e)i[t]=n;return i};const ie=y({data(){return{}}}),u=o=>(I("data-v-4eec8a20"),o=o(),L(),o),re={class:"menu flex flex-item-center"},se={class:"list flex flex-center"},ae=z("\u6587\u6A94"),le=u(()=>a("div",null,"2",-1)),ce=u(()=>a("div",null,"3",-1)),de=u(()=>a("div",null,"4",-1)),fe=u(()=>a("div",null,"5",-1)),ue=u(()=>a("div",null,"6",-1)),_e=u(()=>a("div",null,"7",-1)),pe=u(()=>a("div",null,"8",-1)),he=u(()=>a("div",null,"9",-1)),we=u(()=>a("div",null,"10",-1)),ge=u(()=>a("div",{class:"openMenu flex flex-item-center"},[a("div",{class:"style"})],-1));function me(o,e,i,t,n,s){const r=g("router-link");return b(),S("div",re,[a("div",se,[a("div",null,[x(r,{to:"/"},{default:U(()=>[ae]),_:1})]),le,ce,de,fe,ue,_e,pe,he,we]),ge])}var ve=$(ie,[["render",me],["__scopeId","data-v-4eec8a20"]]);const ye=y({components:{Menu:ve}}),xe=o=>(I("data-v-1aed7f03"),o=o(),L(),o),be={id:"header",class:"flex flex-item-center"},$e=xe(()=>a("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function ke(o,e,i,t,n,s){const r=g("Menu");return b(),S("header",be,[$e,x(r)])}var Se=$(ye,[["render",ke],["__scopeId","data-v-1aed7f03"]]);const Me=y({components:{HeaderMain:Se}});function Ce(o,e,i,t,n,s){const r=g("HeaderMain");return b(),B(r)}var Ee=$(Me,[["render",Ce]]);const Ae="https://antimosquito.a102009102009.repl.co";const Ne=y({data(){return{data:{},oldClick:{village:void 0,town:void 0}}},async mounted(){this.$refs.loading,this.data=(await H({url:`${Ae}/api/v1/data`,method:"GET"})).data;let o=new W,e=!1,i=new G({center:Y([120.221507,23.000694]),zoom:12}),t=new R({projection:i.getProjection()});t.setTracking(!0),t.on("error",d=>console.log(d.message)),t.on("change:position",function(){let d=t.getPosition();o.setGeometry(d?new D(d):void 0),e||(i.setCenter(d),e=!0)});let n=new M({source:new C({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new E}),style:this.villageStyle.bind(this),zIndex:50}),s=new M({source:new C({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new E}),style:this.townStyle.bind(this),zIndex:100}),r=new M({source:new C({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new E}),style:this.countyStyle.bind(this),zIndex:150}),f=new M({source:new C({features:[o]}),style:new h({image:new J({radius:6,fill:new w({color:"#3399CC"}),stroke:new p({color:"#fff",width:2})})}),zIndex:200}),l=new K({target:this.$refs.map,layers:[n,s,r,f],view:i,controls:Q({attribution:!1}).extend([new X({collapsible:!1,collapsed:!0})])});l.on("singleclick",d=>{l.forEachFeatureAtPixel(d.pixel,_=>{var k,m;let c=_;c.get("VILLNAME")&&l.getView().get("resolution")<40&&(c.setStyle(this.villageStyle(c,void 0,{stroke:new p({color:"#000",width:3})})),this.oldClick.village&&((k=this.oldClick.village)==null?void 0:k.ol_uid)!==c.ol_uid&&((m=this.oldClick.village)==null||m.setStyle(this.villageStyle)),this.oldClick.village=c)},{layerFilter:_=>_===n}),l.forEachFeatureAtPixel(d.pixel,_=>{var m,N;let c=_,k=l.getView().get("resolution");c.setStyle(this.townStyle(c,k,{stroke:new p({color:"#000",width:3})})),this.oldClick.town&&((m=this.oldClick.village)==null?void 0:m.ol_uid)!==c.ol_uid&&((N=this.oldClick.town)==null||N.setStyle(this.townStyle)),this.oldClick.town=c},{layerFilter:_=>_===s})})},methods:{setFillColor(o){let e="#fff";return o>50?e="#470115":o>20?e="#6f006d":o>10?e="#a4005b":o>5?e="#d00b33":o>3?e="#e75033":o>1?e="#ffa133":o>0&&(e="#e3d738"),e},countyStyle(o,e,i){var s;let t=o,n=0;if(t.mosquitos===void 0){let r=(s=this.data)==null?void 0:s[t.get("COUNTYNAME")];typeof r=="object"&&Object.entries(r).forEach(([f,l])=>Object.entries(l).forEach(([d,_])=>_.forEach(c=>n+=c.mosquitos)))}return n=t.mosquitos||(t.mosquitos=n),e&&e>180?new h(v({stroke:new p({color:"#0000ff",width:1}),fill:new w({color:this.setFillColor(~~(n/100))}),text:new A({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${t.get("COUNTYNAME")}
${n||""}`})},i)):new h(v({stroke:new p({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"})},i))},townStyle(o,e,i){var n,s;let t=o;if(e&&e>40&&e<180){let r=0;return t.mosquitos===void 0&&Object.entries(((s=(n=this.data)==null?void 0:n[t.get("COUNTYNAME")])==null?void 0:s[t.get("TOWNNAME")])||{}).forEach(([f,l])=>l.forEach(d=>r+=d.mosquitos)),r=t.mosquitos||(t.mosquitos=r),new h(v({stroke:new p({color:"#ff0000",width:1}),fill:new w({color:this.setFillColor(~~(r/50))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${t.get("TOWNNAME")}
${r||""}`})},i))}return e&&e<=180?new h({stroke:new p({color:"#ff0000",width:1})}):new h({fill:new w({color:"#fff"}),stroke:new p({color:"#ff00004a",width:1})})},villageStyle(o,e,i){var s,r,f;let t=o;if(e&&e>40)return new h({fill:new w({color:"#ffffff"})});let n=0;return t.mosquitos===void 0&&(((f=(r=(s=this.data)==null?void 0:s[t.get("COUNTYNAME")])==null?void 0:r[t.get("TOWNNAME")])==null?void 0:f[t.get("VILLNAME")])||[]).forEach(l=>n+=l.mosquitos),n=t.mosquitos||(t.mosquitos=n),new h(v({stroke:new p({color:"#000",width:1}),fill:new w({color:this.setFillColor(~~(n/10))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${t.get("VILLNAME")||""}
${n||""}`})},i))}}}),Oe={class:"map",ref:"map"},qe={class:"loading",ref:"loading"};function Ie(o,e,i,t,n,s){return b(),S(T,null,[a("div",Oe,null,512),a("div",qe,null,512)],64)}var Le=$(Ne,[["render",Ie],["__scopeId","data-v-754d1b2c"]]);const Te=y({components:{templateMain:Ee,Map:Le},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Fe(o,e,i,t,n,s){const r=g("templateMain"),f=g("router-view"),l=g("Map");return b(),S(T,null,[x(r),x(f,{class:"wrapper"}),x(l)],64)}var Pe=$(Te,[["render",Fe]]);function Ve(){return{}}var je={},Ue={};const ze=Symbol(),Be=Z({state:Ve,getters:je,mutations:Ue}),He="modulepreload",F={},We="/",Ge=function(e,i){return!i||i.length===0?e():Promise.all(i.map(t=>{if(t=`${We}${t}`,t in F)return;F[t]=!0;const n=t.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");if(r.rel=n?"stylesheet":He,n||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),n)return new Promise((f,l)=>{r.addEventListener("load",f),r.addEventListener("error",l)})})).then(()=>e())},Ye=[{name:"Home",path:"/",component:()=>Ge(()=>import("./index.50395dfe.js"),["assets/index.50395dfe.js","assets/vendor.645ecb24.js"])}],Re=ee({history:te(),routes:Ye});var De={install(o){o.use(Be,ze),o.use(Re)}};oe(Pe).use(De).mount("#app");export{$ as _};
