var T=Object.defineProperty;var O=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var q=(o,e,n)=>e in o?T(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,y=(o,e)=>{for(var n in e||(e={}))V.call(e,n)&&q(o,n,e[n]);if(O)for(var n of O(e))j.call(e,n)&&q(o,n,e[n]);return o};import{d as x,r as v,c as S,a as c,b,w as U,p as F,e as I,o as $,f as z,g as B,h as H,F as W,V as G,i as Y,G as R,P as D,l as C,s as M,T as E,S as w,C as J,j as g,k as _,M as K,m as Q,A as X,n as A,q as L,t as Z,u as ee,v as te,x as oe}from"./vendor.645ecb24.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}};ie();var k=(o,e)=>{const n=o.__vccOpts||o;for(const[t,i]of e)n[t]=i;return n};const ne=x({data(){return{}}}),p=o=>(F("data-v-4eec8a20"),o=o(),I(),o),re={class:"menu flex flex-item-center"},se={class:"list flex flex-center"},ae=z("\u6587\u6A94"),le=p(()=>c("div",null,"2",-1)),ce=p(()=>c("div",null,"3",-1)),de=p(()=>c("div",null,"4",-1)),ue=p(()=>c("div",null,"5",-1)),fe=p(()=>c("div",null,"6",-1)),_e=p(()=>c("div",null,"7",-1)),pe=p(()=>c("div",null,"8",-1)),he=p(()=>c("div",null,"9",-1)),we=p(()=>c("div",null,"10",-1)),ge=p(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function me(o,e,n,t,i,s){const r=v("router-link");return $(),S("div",re,[c("div",se,[c("div",null,[b(r,{to:"/"},{default:U(()=>[ae]),_:1})]),le,ce,de,ue,fe,_e,pe,he,we]),ge])}var ve=k(ne,[["render",me],["__scopeId","data-v-4eec8a20"]]);const ye=x({components:{Menu:ve}}),xe=o=>(F("data-v-1aed7f03"),o=o(),I(),o),be={id:"header",class:"flex flex-item-center"},$e=xe(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function ke(o,e,n,t,i,s){const r=v("Menu");return $(),S("header",be,[$e,b(r)])}var Se=k(ye,[["render",ke],["__scopeId","data-v-1aed7f03"]]);const Ce=x({components:{HeaderMain:Se}});function Me(o,e,n,t,i,s){const r=v("HeaderMain");return $(),B(r)}var Ee=k(Ce,[["render",Me]]);const Ae="https://antimosquito.a102009102009.repl.co";const Ne=x({data(){return{data:{},oldClick:{village:void 0,town:void 0,county:void 0}}},async mounted(){this.$refs.loading,this.data=(await H({url:`${Ae}/api/v1/data`,method:"GET"})).data;let o=new W,e=!1,n=new G({center:Y([120.221507,23.000694]),zoom:12}),t=new R({projection:n.getProjection()});t.setTracking(!0),t.on("error",u=>console.log(u.message)),t.on("change:position",function(){let u=t.getPosition();o.setGeometry(u?new D(u):void 0),e||(n.setCenter(u),e=!0)});let i=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new E}),style:this.villageStyle.bind(this),zIndex:50}),s=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new E}),style:this.townStyle.bind(this),zIndex:100}),r=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new E}),style:this.countyStyle.bind(this),zIndex:150}),f=new C({source:new M({features:[o]}),style:new w({image:new J({radius:6,fill:new g({color:"#3399CC"}),stroke:new _({color:"#fff",width:2})})}),zIndex:200}),l=new K({target:this.$refs.map,layers:[i,s,r,f],view:n,controls:Q({attribution:!1}).extend([new X({collapsible:!1,collapsed:!0})])});l.on("singleclick",u=>{l.forEachFeatureAtPixel(u.pixel,d=>{var m,h;let a=d;a.get("VILLNAME")&&l.getView().get("resolution")<40&&(a.setStyle(this.villageStyle(a,void 0,{stroke:new _({color:"#000",width:3})})),this.oldClick.village&&((m=this.oldClick.village)==null?void 0:m.ol_uid)!==a.ol_uid&&((h=this.oldClick.village)==null||h.setStyle(this.villageStyle)),this.oldClick.village=a)},{layerFilter:d=>d===i}),l.forEachFeatureAtPixel(u.pixel,d=>{var h,N;let a=d,m=l.getView().get("resolution");a.setStyle(this.townStyle(a,m,{stroke:new _({color:"#000",width:3})})),this.oldClick.town&&((h=this.oldClick.town)==null?void 0:h.ol_uid)!==a.ol_uid&&((N=this.oldClick.town)==null||N.setStyle(this.townStyle)),this.oldClick.town=a},{layerFilter:d=>d===s}),l.forEachFeatureAtPixel(u.pixel,d=>{var m,h;let a=d;a.setStyle(this.countyStyle(a,void 0,{stroke:new _({color:"#000",width:3})})),this.oldClick.county&&((m=this.oldClick.county)==null?void 0:m.ol_uid)!==a.ol_uid&&((h=this.oldClick.county)==null||h.setStyle(this.townStyle)),this.oldClick.county=a},{layerFilter:d=>d===r})})},methods:{setFillColor(o){let e="#fff";return o>50?e="#470115":o>20?e="#6f006d":o>10?e="#a4005b":o>5?e="#d00b33":o>3?e="#e75033":o>1?e="#ffa133":o>0&&(e="#e3d738"),e},countyStyle(o,e,n){var s;let t=o,i=0;if(t.mosquitos===void 0){let r=(s=this.data)==null?void 0:s[t.get("COUNTYNAME")];typeof r=="object"&&Object.entries(r).forEach(([f,l])=>Object.entries(l).forEach(([u,d])=>d.forEach(a=>i+=a.mosquitos)))}return i=t.mosquitos||(t.mosquitos=i),e&&e>180?new w(y({stroke:new _({color:"#0000ff",width:1}),fill:new g({color:this.setFillColor(~~(i/100))}),text:new A({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${t.get("COUNTYNAME")}
${i||""}`})},n)):new w(y({stroke:new _({color:"#0000ff",width:1}),fill:new g({color:"#ffffff00"})},n))},townStyle(o,e,n){var i,s;let t=o;if(e&&e>40&&e<180){let r=0;return t.mosquitos===void 0&&Object.entries(((s=(i=this.data)==null?void 0:i[t.get("COUNTYNAME")])==null?void 0:s[t.get("TOWNNAME")])||{}).forEach(([f,l])=>l.forEach(u=>r+=u.mosquitos)),r=t.mosquitos||(t.mosquitos=r),new w(y({stroke:new _({color:"#ff0000",width:1}),fill:new g({color:this.setFillColor(~~(r/50))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${t.get("TOWNNAME")}
${r||""}`})},n))}return e&&e<=180?new w({stroke:new _({color:"#ff0000",width:1})}):new w({fill:new g({color:"#fff"}),stroke:new _({color:"#ff00004a",width:1})})},villageStyle(o,e,n){var s,r,f;let t=o;if(e&&e>40)return new w({fill:new g({color:"#ffffff"})});let i=0;return t.mosquitos===void 0&&(((f=(r=(s=this.data)==null?void 0:s[t.get("COUNTYNAME")])==null?void 0:r[t.get("TOWNNAME")])==null?void 0:f[t.get("VILLNAME")])||[]).forEach(l=>i+=l.mosquitos),i=t.mosquitos||(t.mosquitos=i),new w(y({stroke:new _({color:"#000",width:1}),fill:new g({color:this.setFillColor(~~(i/10))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new g({color:"#000"}),text:`${t.get("VILLNAME")||""}
${i||""}`})},n))}}}),Oe={class:"map",ref:"map"},qe={class:"loading",ref:"loading"};function Fe(o,e,n,t,i,s){return $(),S(L,null,[c("div",Oe,null,512),c("div",qe,null,512)],64)}var Ie=k(Ne,[["render",Fe],["__scopeId","data-v-0a9036a7"]]);const Le=x({components:{templateMain:Ee,Map:Ie},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Pe(o,e,n,t,i,s){const r=v("templateMain"),f=v("router-view"),l=v("Map");return $(),S(L,null,[b(r),b(f,{class:"wrapper"}),b(l)],64)}var Te=k(Le,[["render",Pe]]);function Ve(){return{}}var je={},Ue={};const ze=Symbol(),Be=Z({state:Ve,getters:je,mutations:Ue}),He="modulepreload",P={},We="/",Ge=function(e,n){return!n||n.length===0?e():Promise.all(n.map(t=>{if(t=`${We}${t}`,t in P)return;P[t]=!0;const i=t.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const r=document.createElement("link");if(r.rel=i?"stylesheet":He,i||(r.as="script",r.crossOrigin=""),r.href=t,document.head.appendChild(r),i)return new Promise((f,l)=>{r.addEventListener("load",f),r.addEventListener("error",l)})})).then(()=>e())},Ye=[{name:"Home",path:"/",component:()=>Ge(()=>import("./index.ed870d75.js"),["assets/index.ed870d75.js","assets/vendor.645ecb24.js"])}],Re=ee({history:te(),routes:Ye});var De={install(o){o.use(Be,ze),o.use(Re)}};oe(Te).use(De).mount("#app");export{k as _};
