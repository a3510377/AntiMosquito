var j=Object.defineProperty;var A=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var L=(t,e,i)=>e in t?j(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,w=(t,e)=>{for(var i in e||(e={}))B.call(e,i)&&L(t,i,e[i]);if(A)for(var i of A(e))U.call(e,i)&&L(t,i,e[i]);return t};import{d as g,r as _,c as k,a as c,b as m,w as H,p as O,e as V,o as v,f as G,g as W,S as p,h as u,F as h,T as E,i as D,j as Y,k as R,V as J,l as K,G as Z,P as Q,m as X,n as y,s as x,q as S,t as ee,C as te,M as oe,u as ne,v as se,O as ie,x as T,y as re,z as ae,A as le,B as ce}from"./vendor.9113e423.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};de();var b=(t,e)=>{const i=t.__vccOpts||t;for(const[o,n]of e)i[o]=n;return i};const ue=g({data(){return{}}}),f=t=>(O("data-v-4eec8a20"),t=t(),V(),t),fe={class:"menu flex flex-item-center"},pe={class:"list flex flex-center"},he=G("\u6587\u6A94"),_e=f(()=>c("div",null,"2",-1)),we=f(()=>c("div",null,"3",-1)),ge=f(()=>c("div",null,"4",-1)),me=f(()=>c("div",null,"5",-1)),ve=f(()=>c("div",null,"6",-1)),ye=f(()=>c("div",null,"7",-1)),xe=f(()=>c("div",null,"8",-1)),be=f(()=>c("div",null,"9",-1)),$e=f(()=>c("div",null,"10",-1)),ke=f(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function Me(t,e,i,o,n,r){const s=_("router-link");return v(),k("div",fe,[c("div",pe,[c("div",null,[m(s,{to:"/"},{default:H(()=>[he]),_:1})]),_e,we,ge,me,ve,ye,xe,be,$e]),ke])}var Ee=b(ue,[["render",Me],["__scopeId","data-v-4eec8a20"]]);const Se=g({components:{Menu:Ee}}),Ce=t=>(O("data-v-1aed7f03"),t=t(),V(),t),Ne={id:"header",class:"flex flex-item-center"},Ae=Ce(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Le(t,e,i,o,n,r){const s=_("Menu");return v(),k("header",Ne,[Ae,m(s)])}var Oe=b(Se,[["render",Le],["__scopeId","data-v-1aed7f03"]]);const Ve=g({components:{HeaderMain:Oe}});function Te(t,e,i,o,n,r){const s=_("HeaderMain");return v(),W(s)}var ze=b(Ve,[["render",Te]]);const Ie="https://antimosquito.a102009102009.repl.co";function C(t){let e="#fff";return t>50?e="#470115":t>20?e="#6f006d":t>10?e="#a4005b":t>5?e="#d00b33":t>3?e="#e75033":t>1?e="#ffa133":t>0&&(e="#e3d738"),e}function z(t,e,i){var r;let o=t,n=0;if(o.mosquitos===void 0){let s=(r=this.data)==null?void 0:r[o.get("COUNTYNAME")];typeof s=="object"&&Object.entries(s).forEach(([a,l])=>Object.entries(l).forEach(([d,$])=>$.forEach(F=>n+=F.mosquitos)))}return n=o.mosquitos||(o.mosquitos=n),e&&e>180?new p(w({stroke:new u({color:"#0000ff",width:1}),fill:new h({color:C(~~(n/100))}),text:new E({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${o.get("COUNTYNAME")}
${n||""}`})},i)):new p(w({stroke:new u({color:"#0000ff",width:1}),fill:new h({color:"#ffffff00"})},i))}function M(t,e,i){var n,r;let o=t;if(e&&e>40&&e<180){let s=0;return o.mosquitos===void 0&&Object.entries(((r=(n=this.data)==null?void 0:n[o.get("COUNTYNAME")])==null?void 0:r[o.get("TOWNNAME")])||{}).forEach(([a,l])=>l.forEach(d=>s+=d.mosquitos)),s=o.mosquitos||(o.mosquitos=s),new p(w({stroke:new u({color:"#ff0000",width:1}),fill:new h({color:C(~~(s/50))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${o.get("TOWNNAME")}
${s||""}`})},i))}return e&&e<=180?new p({stroke:new u({color:"#ff0000",width:1})}):new p({fill:new h({color:"#fff"}),stroke:new u({color:"#ff00004a",width:1})})}function N(t,e,i){var r,s,a;let o=t;if(e&&e>40)return new p({fill:new h({color:"#ffffff"})});let n=0;return o.mosquitos===void 0&&(((a=(s=(r=this.data)==null?void 0:r[o.get("COUNTYNAME")])==null?void 0:s[o.get("TOWNNAME")])==null?void 0:a[o.get("VILLNAME")])||[]).forEach(l=>n+=l.mosquitos),n=o.mosquitos||(o.mosquitos=n),new p(w({stroke:new u({color:"#000",width:1}),fill:new h({color:C(~~(n/10))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new h({color:"#000"}),text:`${o.get("VILLNAME")||""}
${n||""}`})},i))}class I{constructor(e={},i){this.options=e,this.clickEvent=i,this.options.show===void 0&&(this.options.show=!0)}makeButton(){const e=document.createElement("button");return this.options.show||(e.style.display="none"),e.innerHTML=this.options.text||"",e.title=this.options.title||"",e.type="button",e.addEventListener("click",this.clickEvent||(()=>{}),!1),e}}class P{constructor(e={}){var o,n,r,s;const i=document.createElement("div");(o=e.classList)==null||o.forEach(a=>i.classList.add(a)),(n=e.control)==null||n.map(a=>a==null?void 0:a.makeButton()).forEach(a=>{console.log(a),i.append(a)}),(s=(r=e.target)==null?void 0:r.querySelector(".ol-zoom.ol-unselectable.ol-control"))==null||s.append(i)}}const Pe=g({data(){return{data:null,layers:{}}},setup(){const t=D(null),e=Y({village:void 0,town:void 0,county:void 0});let i=new R,o=!1,n=new J({center:K([120.221507,23.000694]),zoom:12}),r=new Z({projection:n.getProjection()});return r.setTracking(!0),r.on("error",s=>console.log(s.message)),r.on("change:position",function(){let s=r.getPosition();i.setGeometry(s?new Q(s):void 0),o||(n.setCenter(s),o=!0)}),{oldClick:e,positionFeature:i,map:t,appView:n,geolocation:r}},async mounted(){let t=this.oldClick,e=this.map,i=this;this.data=(await X({url:`${Ie}/api/v1/data`,method:"GET"})).data;let o=this.layers={village:new y({source:new x({url:"/data/topo/village/20210324.json",format:new S}),style:N.bind(this),zIndex:50}),town:new y({source:new x({url:"/data/topo/town/city.topo.json",format:new S}),style:M.bind(this),zIndex:100}),county:new y({source:new x({url:"/data/topo/county/20200820.json",format:new S}),style:z.bind(this),zIndex:150}),NS1Test:new y({source:new x({url:"/data/ns1hosp_20160603.json",format:new ee}),zIndex:200}),locationPoint:new y({source:new x({features:[this.positionFeature]}),style:new p({image:new te({radius:6,fill:new h({color:"#3399CC"}),stroke:new u({color:"#fff",width:2})})}),zIndex:250})},n=new oe({controls:ne(),target:e,layers:[new se({source:new ie,zIndex:0}),o.village,o.town,o.county,o.NS1Test,o.locationPoint],view:this.appView});new P({target:e,classList:["split","nTop"],control:[new I({target:e,text:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#fff"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>',title:"\u5B9A\u4F4D\u5230\u6211",show:!!this.geolocation.getPosition()},()=>{n.getView().setZoom(12),n.getView().animate({center:i.geolocation.getPosition(),duration:1})})]}),new P({target:e,classList:["split"],control:[new I({target:e,text:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="1.375em" viewBox="0 0 24 24" width="1.375em" fill="#fff"><rect fill="none" height="24" width="24"/><path d="M19.5,6c-1.31,0-2.37,1.01-2.48,2.3C15.14,7.8,14.18,6.5,12,6.5c-2.19,0-3.14,1.3-5.02,1.8C6.87,7.02,5.81,6,4.5,6 C3.12,6,2,7.12,2,8.5V9c0,6,3.6,7.81,6.52,7.98C9.53,17.62,10.72,18,12,18s2.47-0.38,3.48-1.02C18.4,16.81,22,15,22,9V8.5 C22,7.12,20.88,6,19.5,6z M3.5,9V8.5c0-0.55,0.45-1,1-1s1,0.45,1,1v3c0,1.28,0.38,2.47,1.01,3.48C4.99,14.27,3.5,12.65,3.5,9z M20.5,9c0,3.65-1.49,5.27-3.01,5.98c0.64-1.01,1.01-2.2,1.01-3.48v-3c0-0.55,0.45-1,1-1s1,0.45,1,1V9z M10.69,10.48 c-0.44,0.26-0.96,0.56-1.69,0.76V10.2c0.48-0.17,0.84-0.38,1.18-0.58C10.72,9.3,11.23,9,12,9s1.27,0.3,1.8,0.62 c0.34,0.2,0.71,0.42,1.2,0.59v1.04c-0.75-0.21-1.26-0.51-1.71-0.78C12.83,10.2,12.49,10,12,10C11.51,10,11.16,10.2,10.69,10.48z"/></svg>',title:"\u5FEB\u7BE9\u9662\u6240"},function(){this.classList.toggle("off"),o.NS1Test.setVisible(!o.NS1Test.getVisible())})]}),n.on("singleclick",r=>{n.forEachFeatureAtPixel(r.pixel,s=>{var l,d;let a=s;a.get("VILLNAME")&&n.getView().get("resolution")<40&&(a.setStyle(N.call(this,a,void 0,{stroke:new u({color:"#000",width:3})})),t.village&&((l=t.village)==null?void 0:l.ol_uid)!==a.ol_uid&&((d=t.village)==null||d.setStyle(N.bind(this))),t.village=a)},{layerFilter:s=>s===o.village}),n.forEachFeatureAtPixel(r.pixel,s=>{var d,$;let a=s,l=n.getView().get("resolution");a.setStyle(M.call(this,a,l,{stroke:new u({color:"#000",width:3})})),t.town&&((d=t.town)==null?void 0:d.ol_uid)!==a.ol_uid&&(($=t.town)==null||$.setStyle(M.bind(this))),t.town=a},{layerFilter:s=>s===o.town}),n.forEachFeatureAtPixel(r.pixel,s=>{var l,d;let a=s;a.setStyle(z.call(this,a,void 0,{stroke:new u({color:"#000",width:3})})),t.county&&((l=t.county)==null?void 0:l.ol_uid)!==a.ol_uid&&((d=t.county)==null||d.setStyle(M.bind(this))),t.county=a},{layerFilter:s=>s===o.county})})},methods:{}}),qe={class:"map",ref:"map"},Fe={class:"loading",ref:"loading"};function je(t,e,i,o,n,r){return v(),k(T,null,[c("div",qe,null,512),c("div",Fe,null,512)],64)}var Be=b(Pe,[["render",je],["__scopeId","data-v-55838fc0"]]);const Ue=g({components:{templateMain:ze,Map:Be},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function He(t,e,i,o,n,r){const s=_("templateMain"),a=_("router-view"),l=_("Map");return v(),k(T,null,[m(s),m(a,{class:"wrapper"}),m(l)],64)}var Ge=b(Ue,[["render",He]]);function We(){return{}}var De={},Ye={};const Re=Symbol(),Je=re({state:We,getters:De,mutations:Ye}),Ke="modulepreload",q={},Ze="/",Qe=function(e,i){return!i||i.length===0?e():Promise.all(i.map(o=>{if(o=`${Ze}${o}`,o in q)return;q[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":Ke,n||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),n)return new Promise((a,l)=>{s.addEventListener("load",a),s.addEventListener("error",l)})})).then(()=>e())},Xe=[{name:"Home",path:"/",component:()=>Qe(()=>import("./index.66ae5592.js"),["assets/index.66ae5592.js","assets/vendor.9113e423.js"])}],et=ae({history:le(),routes:Xe});var tt={install(t){t.use(Je,Re),t.use(et)}};ce(Ge).use(tt).mount("#app");export{b as _};
