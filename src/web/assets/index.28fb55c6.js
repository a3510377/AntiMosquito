var j=Object.defineProperty;var N=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var C=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&C(e,r,t[r]);if(N)for(var r of N(t))U.call(t,r)&&C(e,r,t[r]);return e};import{d as v,r as m,c as k,a as c,b as x,w as B,p as I,e as L,o as y,f as H,g as W,h as G,F as R,V as Y,i as D,G as J,P as K,l as M,s as S,T as A,S as _,j as h,k as w,m as E,C as Q,M as X,n as Z,A as ee,q as te,t as oe,u as ne,v as re,x as se}from"./vendor.808f496e.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};ie();var b=(e,t)=>{const r=e.__vccOpts||e;for(const[n,o]of t)r[n]=o;return r};const ae=v({data(){return{}}}),d=e=>(I("data-v-4eec8a20"),e=e(),L(),e),le={class:"menu flex flex-item-center"},ce={class:"list flex flex-center"},de=H("\u6587\u6A94"),ue=d(()=>c("div",null,"2",-1)),fe=d(()=>c("div",null,"3",-1)),pe=d(()=>c("div",null,"4",-1)),_e=d(()=>c("div",null,"5",-1)),he=d(()=>c("div",null,"6",-1)),we=d(()=>c("div",null,"7",-1)),ge=d(()=>c("div",null,"8",-1)),me=d(()=>c("div",null,"9",-1)),ve=d(()=>c("div",null,"10",-1)),xe=d(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function ye(e,t,r,n,o,i){const s=m("router-link");return y(),k("div",le,[c("div",ce,[c("div",null,[x(s,{to:"/"},{default:B(()=>[de]),_:1})]),ue,fe,pe,_e,he,we,ge,me,ve]),xe])}var be=b(ae,[["render",ye],["__scopeId","data-v-4eec8a20"]]);const $e=v({components:{Menu:be}}),ke=e=>(I("data-v-1aed7f03"),e=e(),L(),e),Me={id:"header",class:"flex flex-item-center"},Se=ke(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Ae(e,t,r,n,o,i){const s=m("Menu");return y(),k("header",Me,[Se,x(s)])}var Ee=b($e,[["render",Ae],["__scopeId","data-v-1aed7f03"]]);const Ne=v({components:{HeaderMain:Ee}});function Ce(e,t,r,n,o,i){const s=m("HeaderMain");return y(),W(s)}var Oe=b(Ne,[["render",Ce]]);const Ie="https://antimosquito.a102009102009.repl.co";const Le=v({data(){return{data:{},oldClick:{village:void 0,town:void 0}}},async mounted(){let e=this.data=(await G({url:`${Ie}/api/v1/data`,method:"GET"})).data,t=new R,r=!1,n=new Y({center:D([120.221507,23.000694]),zoom:12}),o=new J({projection:n.getProjection()});o.setTracking(!0),o.on("error",a=>console.log(a.message)),o.on("change:position",function(){let a=o.getPosition();t.setGeometry(a?new K(a):void 0),r||(n.setCenter(a),r=!0)});let i=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new A}),style:this.villageStyle.bind(this),zIndex:50}),s=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new A}),style:(a,l)=>{var f;if(l>40&&l<180){let g=0;return Object.entries(((f=e==null?void 0:e[a.get("COUNTYNAME")])==null?void 0:f[a.get("TOWNNAME")])||{}).forEach(([Qe,V])=>V.forEach(q=>g+=q.mosquitos)),new _({stroke:new h({color:"#ff0000",width:1}),fill:new w({color:this.setFillColor(~~(g/50))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${a.get("TOWNNAME")}
${g||""}`})})}return l<=180?new _({stroke:new h({color:"#ff0000",width:1})}):new _({fill:new w({color:"#fff"}),stroke:new h({color:"#ff00004a",width:1})})},zIndex:100}),u=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new A}),style:(a,l)=>new _({stroke:new h({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"}),text:new E({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:l>180?a.get("COUNTYNAME")||"":void 0})}),zIndex:150}),p=new M({source:new S({features:[t]}),style:new _({image:new Q({radius:6,fill:new w({color:"#3399CC"}),stroke:new h({color:"#fff",width:2})})}),zIndex:200}),$=new X({target:this.$refs.map,layers:[i,s,u,p],view:n,controls:Z({attribution:!1}).extend([new ee({collapsible:!1,collapsed:!0})])});const F=(a,l)=>(a._chick=!a._chick,a.setStyle(l.setStyle),a);$.on("singleclick",a=>{$.forEachFeatureAtPixel(a.pixel,l=>{var g;let f=l;f.get("VILLNAME")&&$.getView().get("resolution")<40&&(f=F(f,{setStyle:this.villageStyle(f,void 0,{stroke:new h({color:"#000",width:3})})}),this.oldClick.village&&((g=this.oldClick.village)==null||g.setStyle(this.villageStyle(this.oldClick.village))),this.oldClick.village=f)},{layerFilter:l=>l===i}),$.forEachFeatureAtPixel(a.pixel,l=>{},{layerFilter:l=>l===s})})},methods:{setFillColor(e){let t="#fff";return e>50?t="#470115":e>20?t="#6f006d":e>10?t="#a4005b":e>5?t="#d00b33":e>3?t="#e75033":e>1?t="#ffa133":e>0&&(t="#e3d738"),t},villageStyle(e,t,r){var i,s,u;let n=e;if(t&&t>40)return new _({fill:new w({color:"#ffffff"})});let o=0;return n.mosquitos===void 0&&(((u=(s=(i=this.data)==null?void 0:i[n.get("COUNTYNAME")])==null?void 0:s[n.get("TOWNNAME")])==null?void 0:u[n.get("VILLNAME")])||[]).forEach(p=>o+=p.mosquitos),o=n.mosquitos||(n.mosquitos=o),new _(O({stroke:new h({color:"#000",width:1}),fill:new w({color:this.setFillColor(~~(o/10))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${n.get("VILLNAME")||""}
${o||""}`})},r))}}}),Pe={class:"map",ref:"map"};function Te(e,t,r,n,o,i){return y(),k("div",Pe,null,512)}var Fe=b(Le,[["render",Te],["__scopeId","data-v-0e4a9f2a"]]);const Ve=v({components:{templateMain:Oe,Map:Fe},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function qe(e,t,r,n,o,i){const s=m("templateMain"),u=m("router-views"),p=m("Map");return y(),k(te,null,[x(s),x(u),x(p)],64)}var P=b(Ve,[["render",qe]]),je=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:P});function ze(){return{}}var Ue={},Be={};const He=Symbol(),We=oe({state:ze,getters:Ue,mutations:Be}),Ge="modulepreload",T={},Re="/",Ye=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${Re}${n}`,n in T)return;T[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":Ge,o||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),o)return new Promise((u,p)=>{s.addEventListener("load",u),s.addEventListener("error",p)})})).then(()=>t())},De=[{name:"Home",path:"/",component:()=>Ye(()=>Promise.resolve().then(function(){return je}),void 0)}],Je=ne({history:re(),routes:De});var Ke={install(e){e.use(We,He),e.use(Je)}};se(P).use(Ke).mount("#app");
