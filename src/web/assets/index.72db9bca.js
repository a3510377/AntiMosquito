var q=Object.defineProperty;var O=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var L=(e,t,n)=>t in e?q(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&L(e,n,t[n]);if(O)for(var n of O(t))U.call(t,n)&&L(e,n,t[n]);return e};import{d as m,r as w,c as k,a,b as v,w as B,p as T,e as P,o as x,f as H,g as W,h as G,F as R,V as Y,i as D,G as J,P as K,l as M,s as S,T as N,S as _,j as p,k as h,m as E,C as Q,M as X,n as Z,A as ee,q as te,t as oe,u as ne,v as re,x as se}from"./vendor.808f496e.js";const ie=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}};ie();var b=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};const ae=m({data(){return{}}}),c=e=>(T("data-v-4eec8a20"),e=e(),P(),e),le={class:"menu flex flex-item-center"},ce={class:"list flex flex-center"},de=H("\u6587\u6A94"),fe=c(()=>a("div",null,"2",-1)),ue=c(()=>a("div",null,"3",-1)),_e=c(()=>a("div",null,"4",-1)),pe=c(()=>a("div",null,"5",-1)),he=c(()=>a("div",null,"6",-1)),we=c(()=>a("div",null,"7",-1)),ge=c(()=>a("div",null,"8",-1)),me=c(()=>a("div",null,"9",-1)),ve=c(()=>a("div",null,"10",-1)),xe=c(()=>a("div",{class:"openMenu flex flex-item-center"},[a("div",{class:"style"})],-1));function be(e,t,n,r,o,s){const i=w("router-link");return x(),k("div",le,[a("div",ce,[a("div",null,[v(i,{to:"/"},{default:B(()=>[de]),_:1})]),fe,ue,_e,pe,he,we,ge,me,ve]),xe])}var ye=b(ae,[["render",be],["__scopeId","data-v-4eec8a20"]]);const $e=m({components:{Menu:ye}}),ke=e=>(T("data-v-1aed7f03"),e=e(),P(),e),Me={id:"header",class:"flex flex-item-center"},Se=ke(()=>a("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Ae(e,t,n,r,o,s){const i=w("Menu");return x(),k("header",Me,[Se,v(i)])}var Ne=b($e,[["render",Ae],["__scopeId","data-v-1aed7f03"]]);const Ee=m({components:{HeaderMain:Ne}});function Ce(e,t,n,r,o,s){const i=w("HeaderMain");return x(),W(i)}var Oe=b(Ee,[["render",Ce]]);const Le="https://antimosquito.a102009102009.repl.co";const Ie=m({data(){return{data:{},oldClick:void 0}},async mounted(){let e=this.data=(await G({url:`${Le}/api/v1/data`,method:"GET"})).data,t=new R,n=!1,r=new Y({center:D([120.221507,23.000694]),zoom:12}),o=new J({projection:r.getProjection()});o.setTracking(!0),o.on("error",l=>console.log(l.message)),o.on("change:position",function(){let l=o.getPosition();t.setGeometry(l?new K(l):void 0),n||(r.setCenter(l),n=!0)});let s=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new N}),style:this.villageStyle.bind(this),zIndex:50}),i=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new N}),style:(l,d)=>{var A;if(d>40&&d<180){let y=0;return Object.entries(((A=e==null?void 0:e[l.get("COUNTYNAME")])==null?void 0:A[l.get("TOWNNAME")])||{}).forEach(([f,$])=>$.forEach(j=>y+=j.mosquitos)),new _({stroke:new p({color:"#ff0000",width:1}),fill:new h({color:this.setFillColor(~~(y/50))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${l.get("TOWNNAME")}
${y||""}`})})}return d<=180?new _({stroke:new p({color:"#ff0000",width:1})}):new _({fill:new h({color:"#fff"}),stroke:new p({color:"#ff00004a",width:1})})},zIndex:100}),u=new M({source:new S({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new N}),style:(l,d)=>new _({stroke:new p({color:"#0000ff",width:1}),fill:new h({color:"#ffffff00"}),text:new E({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:d>180?l.get("COUNTYNAME")||"":void 0})}),zIndex:150}),g=new M({source:new S({features:[t]}),style:new _({image:new Q({radius:6,fill:new h({color:"#3399CC"}),stroke:new p({color:"#fff",width:2})})}),zIndex:200}),C=new X({target:this.$refs.map,layers:[s,i,u,g],view:r,controls:Z({attribution:!1}).extend([new ee({collapsible:!1,collapsed:!0})])});C.on("singleclick",l=>{C.forEachFeatureAtPixel(l.pixel,(d,A,y)=>{var $;let f=d;f.get("VILLNAME")?(f._chick=!f._chick,f.setStyle(this.villageStyle(f,void 0,{stroke:new p({color:"#000",width:3})})),this.oldClick!==null&&(($=this.oldClick)==null||$.setStyle(this.villageStyle(this.oldClick))),this.oldClick=f):f.get("VILLNAME")&&(f._chick=!1)},{layerFilter:d=>d===s})})},methods:{setFillColor(e){let t="#fff";return e>50?t="#470115":e>20?t="#6f006d":e>10?t="#a4005b":e>5?t="#d00b33":e>3?t="#e75033":e>1?t="#ffa133":e>0&&(t="#e3d738"),t},villageStyle(e,t,n){var o,s,i;if(t&&t>40)return new _({fill:new h({color:"#ffffff"})});let r=0;return(((i=(s=(o=this.data)==null?void 0:o[e.get("COUNTYNAME")])==null?void 0:s[e.get("TOWNNAME")])==null?void 0:i[e.get("VILLNAME")])||[]).forEach(u=>r+=u.mosquitos),new _(I({stroke:new p({color:"#000",width:1}),fill:new h({color:this.setFillColor(~~(r/10))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new h({color:"#000"}),text:`${e.get("VILLNAME")||""}
${r||""}`})},n))}}}),Te={class:"map",ref:"map"};function Pe(e,t,n,r,o,s){return x(),k("div",Te,null,512)}var Ve=b(Ie,[["render",Pe],["__scopeId","data-v-e6d9cf62"]]);const Fe=m({components:{templateMain:Oe,Map:Ve},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function je(e,t,n,r,o,s){const i=w("templateMain"),u=w("router-views"),g=w("Map");return x(),k(te,null,[v(i),v(u),v(g)],64)}var V=b(Fe,[["render",je]]),qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:V});function ze(){return{}}var Ue={},Be={};const He=Symbol(),We=oe({state:ze,getters:Ue,mutations:Be}),Ge="modulepreload",F={},Re="/",Ye=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${Re}${r}`,r in F)return;F[r]=!0;const o=r.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${s}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":Ge,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((u,g)=>{i.addEventListener("load",u),i.addEventListener("error",g)})})).then(()=>t())},De=[{name:"Home",path:"/",component:()=>Ye(()=>Promise.resolve().then(function(){return qe}),void 0)}],Je=ne({history:re(),routes:De});var Ke={install(e){e.use(We,He),e.use(Je)}};se(V).use(Ke).mount("#app");
