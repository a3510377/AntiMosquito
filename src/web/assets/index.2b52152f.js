var V=Object.defineProperty;var O=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var q=(t,e,i)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,k=(t,e)=>{for(var i in e||(e={}))F.call(e,i)&&q(t,i,e[i]);if(O)for(var i of O(e))j.call(e,i)&&q(t,i,e[i]);return t};import{d as v,r as g,c as S,a,b as y,w as U,p as I,e as L,o as x,f as z,g as B,h as H,F as W,V as G,i as Y,G as D,P as R,l as C,s as M,T as E,S as h,C as J,j as w,k as _,M as K,m as Q,A as X,n as A,t as Z,q as T,u as ee,v as te,x as oe,y as ne}from"./vendor.9ff3a2a7.js";const ie=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}};ie();var b=(t,e)=>{const i=t.__vccOpts||t;for(const[o,n]of e)i[o]=n;return i};const se=v({data(){return{}}}),f=t=>(I("data-v-4eec8a20"),t=t(),L(),t),re={class:"menu flex flex-item-center"},ae={class:"list flex flex-center"},le=z("\u6587\u6A94"),ce=f(()=>a("div",null,"2",-1)),de=f(()=>a("div",null,"3",-1)),ue=f(()=>a("div",null,"4",-1)),fe=f(()=>a("div",null,"5",-1)),pe=f(()=>a("div",null,"6",-1)),_e=f(()=>a("div",null,"7",-1)),he=f(()=>a("div",null,"8",-1)),we=f(()=>a("div",null,"9",-1)),ge=f(()=>a("div",null,"10",-1)),me=f(()=>a("div",{class:"openMenu flex flex-item-center"},[a("div",{class:"style"})],-1));function ve(t,e,i,o,n,r){const s=g("router-link");return x(),S("div",re,[a("div",ae,[a("div",null,[y(s,{to:"/"},{default:U(()=>[le]),_:1})]),ce,de,ue,fe,pe,_e,he,we,ge]),me])}var ye=b(se,[["render",ve],["__scopeId","data-v-4eec8a20"]]);const xe=v({components:{Menu:ye}}),be=t=>(I("data-v-1aed7f03"),t=t(),L(),t),$e={id:"header",class:"flex flex-item-center"},ke=be(()=>a("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Se(t,e,i,o,n,r){const s=g("Menu");return x(),S("header",$e,[ke,y(s)])}var Ce=b(xe,[["render",Se],["__scopeId","data-v-1aed7f03"]]);const Me=v({components:{HeaderMain:Ce}});function Ee(t,e,i,o,n,r){const s=g("HeaderMain");return x(),B(s)}var Ae=b(Me,[["render",Ee]]);const Ne="https://antimosquito.a102009102009.repl.co";const Oe=v({data(){return{data:{},oldClick:{village:void 0,town:void 0}}},async mounted(){this.$refs.loading,this.data=(await H({url:`${Ne}/api/v1/data`,method:"GET"})).data;let t=new W,e=!1,i=new G({center:Y([120.221507,23.000694]),zoom:12}),o=new D({projection:i.getProjection()});o.setTracking(!0),o.on("error",d=>console.log(d.message)),o.on("change:position",function(){let d=o.getPosition();t.setGeometry(d?new R(d):void 0),e||(i.setCenter(d),e=!0)});let n=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new E}),style:this.villageStyle.bind(this),zIndex:50}),r=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new E}),style:this.townStyle.bind(this),zIndex:100}),s=new C({source:new M({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new E}),style:this.countyStyle.bind(this),zIndex:150}),u=new C({source:new M({features:[t]}),style:new h({image:new J({radius:6,fill:new w({color:"#3399CC"}),stroke:new _({color:"#fff",width:2})})}),zIndex:200}),l=new K({target:this.$refs.map,layers:[n,r,s,u],view:i,controls:Q({attribution:!1}).extend([new X({collapsible:!1,collapsed:!0})])});l.on("singleclick",d=>{l.forEachFeatureAtPixel(d.pixel,p=>{var $,m;let c=p;c.get("VILLNAME")&&l.getView().get("resolution")<40&&(c.setStyle(this.villageStyle(c,void 0,{stroke:new _({color:"#000",width:3})})),this.oldClick.village&&(($=this.oldClick.village)==null?void 0:$.ol_uid)!==c.ol_uid&&((m=this.oldClick.village)==null||m.setStyle(this.villageStyle)),this.oldClick.village=c)},{layerFilter:p=>p===n}),l.forEachFeatureAtPixel(d.pixel,p=>{var m,N;let c=p,$=l.getView().get("resolution");c.setStyle(this.townStyle(c,$,{stroke:new _({color:"#000",width:3})})),this.oldClick.town&&((m=this.oldClick.village)==null?void 0:m.ol_uid)!==c.ol_uid&&((N=this.oldClick.town)==null||N.setStyle(this.townStyle)),this.oldClick.town=c},{layerFilter:p=>p===r})})},methods:{setFillColor(t){let e="#fff";return t>50?e="#470115":t>20?e="#6f006d":t>10?e="#a4005b":t>5?e="#d00b33":t>3?e="#e75033":t>1?e="#ffa133":t>0&&(e="#e3d738"),e},countyStyle(t,e,i){var r;let o=t,n=0;if(o.mosquitos===void 0){let s=(r=this.data)==null?void 0:r[o.get("COUNTYNAME")];typeof s=="object"&&Object.entries(s).forEach(([u,l])=>Object.entries(l).forEach(([d,p])=>p.forEach(c=>n+=c.mosquitos)))}return n=o.mosquitos||(o.mosquitos=n),new h(k({stroke:new _({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"}),text:new A({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:e&&e>180?o.get("COUNTYNAME")+n||"":void 0})},i))},townStyle(t,e,i){var n,r;let o=t;if(e&&e>40&&e<180){let s=0;return o.mosquitos===void 0&&Object.entries(((r=(n=this.data)==null?void 0:n[o.get("COUNTYNAME")])==null?void 0:r[o.get("TOWNNAME")])||{}).forEach(([u,l])=>l.forEach(d=>s+=d.mosquitos)),s=o.mosquitos||(o.mosquitos=s),new h(k({stroke:new _({color:"#ff0000",width:1}),fill:new w({color:this.setFillColor(~~(s/50))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${o.get("TOWNNAME")}
${s||""}`})},i))}return e&&e<=180?new h({stroke:new _({color:"#ff0000",width:1})}):new h({fill:new w({color:"#fff"}),stroke:new _({color:"#ff00004a",width:1})})},villageStyle(t,e,i){var r,s,u;let o=t;if(e&&e>40)return new h({fill:new w({color:"#ffffff"})});let n=0;return o.mosquitos===void 0&&(((u=(s=(r=this.data)==null?void 0:r[o.get("COUNTYNAME")])==null?void 0:s[o.get("TOWNNAME")])==null?void 0:u[o.get("VILLNAME")])||[]).forEach(l=>n+=l.mosquitos),n=o.mosquitos||(o.mosquitos=n),new h(k({stroke:new _({color:"#000",width:1}),fill:new w({color:this.setFillColor(~~(n/10))}),text:new A({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${o.get("VILLNAME")||""}
${n||""}`})},i))}}}),qe={class:"map",ref:"map"},Ie={class:"loading",ref:"loading"},Le=["textContent"];function Te(t,e,i,o,n,r){return x(),S(T,null,[a("div",qe,null,512),a("div",Ie,null,512),a("div",{class:"test",textContent:Z(t.oldClick)},null,8,Le)],64)}var Pe=b(Oe,[["render",Te],["__scopeId","data-v-53e10cc9"]]);const Ve=v({components:{templateMain:Ae,Map:Pe},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Fe(t,e,i,o,n,r){const s=g("templateMain"),u=g("router-view"),l=g("Map");return x(),S(T,null,[y(s),y(u,{class:"wrapper"}),y(l)],64)}var je=b(Ve,[["render",Fe]]);function Ue(){return{}}var ze={},Be={};const He=Symbol(),We=ee({state:Ue,getters:ze,mutations:Be}),Ge="modulepreload",P={},Ye="/",De=function(e,i){return!i||i.length===0?e():Promise.all(i.map(o=>{if(o=`${Ye}${o}`,o in P)return;P[o]=!0;const n=o.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":Ge,n||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),n)return new Promise((u,l)=>{s.addEventListener("load",u),s.addEventListener("error",l)})})).then(()=>e())},Re=[{name:"Home",path:"/",component:()=>De(()=>import("./index.aab717b4.js"),["assets/index.aab717b4.js","assets/vendor.9ff3a2a7.js"])}],Je=te({history:oe(),routes:Re});var Ke={install(t){t.use(We,He),t.use(Je)}};ne(je).use(Ke).mount("#app");export{b as _};
