var V=Object.defineProperty;var O=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var I=(t,e,r)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A=(t,e)=>{for(var r in e||(e={}))q.call(e,r)&&I(t,r,e[r]);if(O)for(var r of O(e))j.call(e,r)&&I(t,r,e[r]);return t};import{d as m,r as g,c as k,a as l,b as v,w as z,p as L,e as P,o as y,f as U,g as B,h as H,F as W,V as G,i as R,G as Y,P as D,l as S,s as M,T as C,S as h,j as _,k as w,m as E,C as J,M as K,n as Q,A as X,q as Z,t as ee,u as te,v as oe,x as ne}from"./vendor.808f496e.js";const re=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};re();var x=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r};const se=m({data(){return{}}}),f=t=>(L("data-v-4eec8a20"),t=t(),P(),t),ie={class:"menu flex flex-item-center"},ae={class:"list flex flex-center"},le=U("\u6587\u6A94"),ce=f(()=>l("div",null,"2",-1)),de=f(()=>l("div",null,"3",-1)),ue=f(()=>l("div",null,"4",-1)),fe=f(()=>l("div",null,"5",-1)),pe=f(()=>l("div",null,"6",-1)),_e=f(()=>l("div",null,"7",-1)),he=f(()=>l("div",null,"8",-1)),we=f(()=>l("div",null,"9",-1)),ge=f(()=>l("div",null,"10",-1)),me=f(()=>l("div",{class:"openMenu flex flex-item-center"},[l("div",{class:"style"})],-1));function ve(t,e,r,n,o,i){const s=g("router-link");return y(),k("div",ie,[l("div",ae,[l("div",null,[v(s,{to:"/"},{default:z(()=>[le]),_:1})]),ce,de,ue,fe,pe,_e,he,we,ge]),me])}var ye=x(se,[["render",ve],["__scopeId","data-v-4eec8a20"]]);const xe=m({components:{Menu:ye}}),be=t=>(L("data-v-1aed7f03"),t=t(),P(),t),$e={id:"header",class:"flex flex-item-center"},ke=be(()=>l("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Se(t,e,r,n,o,i){const s=g("Menu");return y(),k("header",$e,[ke,v(s)])}var Me=x(xe,[["render",Se],["__scopeId","data-v-1aed7f03"]]);const Ae=m({components:{HeaderMain:Me}});function Ce(t,e,r,n,o,i){const s=g("HeaderMain");return y(),B(s)}var Ee=x(Ae,[["render",Ce]]);const Ne="https://antimosquito.a102009102009.repl.co";const Oe=m({data(){return{data:{},oldClick:{village:void 0,town:void 0}}},async mounted(){this.data=(await H({url:`${Ne}/api/v1/data`,method:"GET"})).data;let t=new W,e=!1,r=new G({center:R([120.221507,23.000694]),zoom:12}),n=new Y({projection:r.getProjection()});n.setTracking(!0),n.on("error",a=>console.log(a.message)),n.on("change:position",function(){let a=n.getPosition();t.setGeometry(a?new D(a):void 0),e||(r.setCenter(a),e=!0)});let o=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new C}),style:this.villageStyle.bind(this),zIndex:50}),i=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new C}),style:this.townStyle.bind(this),zIndex:100}),s=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new C}),style:(a,d)=>new h({stroke:new _({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"}),text:new E({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:d>180?a.get("COUNTYNAME")||"":void 0})}),zIndex:150}),p=new S({source:new M({features:[t]}),style:new h({image:new J({radius:6,fill:new w({color:"#3399CC"}),stroke:new _({color:"#fff",width:2})})}),zIndex:200}),c=new K({target:this.$refs.map,layers:[o,i,s,p],view:r,controls:Q({attribution:!1}).extend([new X({collapsible:!1,collapsed:!0})])});const b=(a,d)=>(a._chick=!a._chick,a.setStyle(d.setStyle),a);c.on("singleclick",a=>{c.forEachFeatureAtPixel(a.pixel,d=>{var $;let u=d;u.get("VILLNAME")&&c.getView().get("resolution")<40&&(u=b(u,{setStyle:this.villageStyle(u,void 0,{stroke:new _({color:"#000",width:3})})}),this.oldClick.village&&(($=this.oldClick.village)==null||$.setStyle(this.villageStyle)),this.oldClick.village=u)},{layerFilter:d=>d===o}),c.forEachFeatureAtPixel(a.pixel,d=>{var N;let u=d,$=c.getView().get("resolution");u=b(u,{setStyle:this.townStyle(u,$,{stroke:new _({color:"#000",width:3})})}),this.oldClick.town&&((N=this.oldClick.town)==null||N.setStyle(this.townStyle)),this.oldClick.town=u},{layerFilter:d=>d===i})})},methods:{setFillColor(t){let e="#fff";return t>50?e="#470115":t>20?e="#6f006d":t>10?e="#a4005b":t>5?e="#d00b33":t>3?e="#e75033":t>1?e="#ffa133":t>0&&(e="#e3d738"),e},townStyle(t,e,r){var o,i;let n=t;if(e&&e>40&&e<180){let s=0;return Object.entries(((i=(o=this.data)==null?void 0:o[n.get("COUNTYNAME")])==null?void 0:i[n.get("TOWNNAME")])||{}).forEach(([p,c])=>c.forEach(b=>s+=b.mosquitos)),new h(A({stroke:new _({color:"#ff0000",width:1}),fill:new w({color:this.setFillColor(~~(s/50))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("TOWNNAME")}
${s||""}`})},r))}return e&&e<=180?new h({stroke:new _({color:"#ff0000",width:1})}):new h({fill:new w({color:"#fff"}),stroke:new _({color:"#ff00004a",width:1})})},villageStyle(t,e,r){var i,s,p;let n=t;if(e&&e>40)return new h({fill:new w({color:"#ffffff"})});let o=0;return n.mosquitos===void 0&&(((p=(s=(i=this.data)==null?void 0:i[n.get("COUNTYNAME")])==null?void 0:s[n.get("TOWNNAME")])==null?void 0:p[n.get("VILLNAME")])||[]).forEach(c=>o+=c.mosquitos),o=n.mosquitos||(n.mosquitos=o),new h(A({stroke:new _({color:"#000",width:1}),fill:new w({color:this.setFillColor(~~(o/10))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${n.get("VILLNAME")||""}
${o||""}`})},r))}}}),Ie={class:"map",ref:"map"};function Le(t,e,r,n,o,i){return y(),k("div",Ie,null,512)}var Pe=x(Oe,[["render",Le],["__scopeId","data-v-29eb625e"]]);const Te=m({components:{templateMain:Ee,Map:Pe},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Fe(t,e,r,n,o,i){const s=g("templateMain"),p=g("router-views"),c=g("Map");return y(),k(Z,null,[v(s),v(p),v(c)],64)}var T=x(Te,[["render",Fe]]),Ve=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:T});function qe(){return{}}var je={},ze={};const Ue=Symbol(),Be=ee({state:qe,getters:je,mutations:ze}),He="modulepreload",F={},We="/",Ge=function(e,r){return!r||r.length===0?e():Promise.all(r.map(n=>{if(n=`${We}${n}`,n in F)return;F[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":He,o||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),o)return new Promise((p,c)=>{s.addEventListener("load",p),s.addEventListener("error",c)})})).then(()=>e())},Re=[{name:"Home",path:"/",component:()=>Ge(()=>Promise.resolve().then(function(){return Ve}),void 0)}],Ye=te({history:oe(),routes:Re});var De={install(t){t.use(Be,Ue),t.use(Ye)}};ne(T).use(De).mount("#app");
