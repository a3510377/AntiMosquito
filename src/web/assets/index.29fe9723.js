var P=Object.defineProperty;var O=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var V=(o,e,r)=>e in o?P(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,g=(o,e)=>{for(var r in e||(e={}))z.call(e,r)&&V(o,r,e[r]);if(O)for(var r of O(e))j.call(e,r)&&V(o,r,e[r]);return o};import{d as m,r as w,c as M,a as c,b as v,w as B,p as T,e as L,o as y,f as U,g as H,S as _,h as f,F as h,T as E,i as G,j as W,k as Y,V as D,l as R,G as J,P as K,m as Q,n as x,s as b,q as C,t as X,C as Z,M as ee,u as te,v as oe,O as ne,x as I,y as re,z as se,A as ie,B as ae}from"./vendor.9113e423.js";const le=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(t){if(t.ep)return;t.ep=!0;const i=r(t);fetch(t.href,i)}};le();var $=(o,e)=>{const r=o.__vccOpts||o;for(const[n,t]of e)r[n]=t;return r};const ce=m({data(){return{}}}),p=o=>(T("data-v-4eec8a20"),o=o(),L(),o),de={class:"menu flex flex-item-center"},ue={class:"list flex flex-center"},fe=U("\u6587\u6A94"),pe=p(()=>c("div",null,"2",-1)),_e=p(()=>c("div",null,"3",-1)),he=p(()=>c("div",null,"4",-1)),we=p(()=>c("div",null,"5",-1)),ge=p(()=>c("div",null,"6",-1)),me=p(()=>c("div",null,"7",-1)),ve=p(()=>c("div",null,"8",-1)),ye=p(()=>c("div",null,"9",-1)),xe=p(()=>c("div",null,"10",-1)),be=p(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function $e(o,e,r,n,t,i){const s=w("router-link");return y(),M("div",de,[c("div",ue,[c("div",null,[v(s,{to:"/"},{default:B(()=>[fe]),_:1})]),pe,_e,he,we,ge,me,ve,ye,xe]),be])}var ke=$(ce,[["render",$e],["__scopeId","data-v-4eec8a20"]]);const Me=m({components:{Menu:ke}}),Se=o=>(T("data-v-1aed7f03"),o=o(),L(),o),Ee={id:"header",class:"flex flex-item-center"},Ce=Se(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Ne(o,e,r,n,t,i){const s=w("Menu");return y(),M("header",Ee,[Ce,v(s)])}var Ae=$(Me,[["render",Ne],["__scopeId","data-v-1aed7f03"]]);const Oe=m({components:{HeaderMain:Ae}});function Ve(o,e,r,n,t,i){const s=w("HeaderMain");return y(),H(s)}var Te=$(Oe,[["render",Ve]]);const Le="https://antimosquito.a102009102009.repl.co";function N(o){let e="#fff";return o>50?e="#470115":o>20?e="#6f006d":o>10?e="#a4005b":o>5?e="#d00b33":o>3?e="#e75033":o>1?e="#ffa133":o>0&&(e="#e3d738"),e}function q(o,e,r){var i;let n=o,t=0;if(n.mosquitos===void 0){let s=(i=this.data)==null?void 0:i[n.get("COUNTYNAME")];typeof s=="object"&&Object.entries(s).forEach(([l,a])=>Object.entries(a).forEach(([d,u])=>u.forEach(k=>t+=k.mosquitos)))}return t=n.mosquitos||(n.mosquitos=t),e&&e>180?new _(g({stroke:new f({color:"#0000ff",width:1}),fill:new h({color:N(~~(t/100))}),text:new E({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("COUNTYNAME")}
${t||""}`})},r)):new _(g({stroke:new f({color:"#0000ff",width:1}),fill:new h({color:"#ffffff00"})},r))}function S(o,e,r){var t,i;let n=o;if(e&&e>40&&e<180){let s=0;return n.mosquitos===void 0&&Object.entries(((i=(t=this.data)==null?void 0:t[n.get("COUNTYNAME")])==null?void 0:i[n.get("TOWNNAME")])||{}).forEach(([l,a])=>a.forEach(d=>s+=d.mosquitos)),s=n.mosquitos||(n.mosquitos=s),new _(g({stroke:new f({color:"#ff0000",width:1}),fill:new h({color:N(~~(s/50))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("TOWNNAME")}
${s||""}`})},r))}return e&&e<=180?new _({stroke:new f({color:"#ff0000",width:1})}):new _({fill:new h({color:"#fff"}),stroke:new f({color:"#ff00004a",width:1})})}function A(o,e,r){var i,s,l;let n=o;if(e&&e>40)return new _({fill:new h({color:"#ffffff"})});let t=0;return n.mosquitos===void 0&&(((l=(s=(i=this.data)==null?void 0:i[n.get("COUNTYNAME")])==null?void 0:s[n.get("TOWNNAME")])==null?void 0:l[n.get("VILLNAME")])||[]).forEach(a=>t+=a.mosquitos),t=n.mosquitos||(n.mosquitos=t),new _(g({stroke:new f({color:"#000",width:1}),fill:new h({color:N(~~(t/10))}),text:new E({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new h({color:"#000"}),text:`${n.get("VILLNAME")||""}
${t||""}`})},r))}class Ie{constructor(e={},r){this.options=e,this.clickEvent=r}makeButton(){var r;const e=document.createElement("button");return e.innerHTML=this.options.text||"",e.title=this.options.title||"",e.type="button",e.addEventListener("click",(r=this.clickEvent)==null?void 0:r.bind(this),!1),e}}class qe{constructor(e={}){var n,t,i;const r=document.createElement("div");r.append(...((n=e.control)==null?void 0:n.map(s=>s.makeButton()))||[]),(i=(t=e.target)==null?void 0:t.querySelector(".ol-zoom.ol-unselectable.ol-control"))==null||i.append(r)}}const Fe=m({data(){return{data:null,layers:{}}},setup(){const o=G(null),e=W({village:void 0,town:void 0,county:void 0});let r=new Y,n=!1,t=new D({center:R([120.221507,23.000694]),zoom:12}),i=new J({projection:t.getProjection()});return i.setTracking(!0),i.on("error",s=>console.log(s.message)),i.on("change:position",function(){let s=i.getPosition();r.setGeometry(s?new K(s):void 0),n||(t.setCenter(s),n=!0)}),{oldClick:e,positionFeature:r,map:o,appView:t}},async mounted(){let o=this.oldClick,e=this.positionFeature,r=this.map,n=this.appView;this.data=(await Q({url:`${Le}/api/v1/data`,method:"GET"})).data;let t=this.layers={village:new x({source:new b({url:"/data/topo/village/20210324.json",format:new C}),style:A.bind(this),zIndex:50}),town:new x({source:new b({url:"/data/topo/town/city.topo.json",format:new C}),style:S.bind(this),zIndex:100}),county:new x({source:new b({url:"/data/topo/county/20200820.json",format:new C}),style:q.bind(this),zIndex:150}),NS1Test:new x({source:new b({url:"/data/ns1hosp_20160603.json",format:new X}),zIndex:200}),locationPoint:new x({source:new b({features:[e]}),style:new _({image:new Z({radius:6,fill:new h({color:"#3399CC"}),stroke:new f({color:"#fff",width:2})})}),zIndex:250})},i=new ee({controls:te(),target:r,layers:[new oe({source:new ne,zIndex:0}),t.village,t.town,t.county,t.NS1Test,t.locationPoint],view:n});new qe({target:r,control:[new Ie({target:r,text:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="1.375em" viewBox="0 0 24 24" width="1.375em" fill="#fff"><rect fill="none" height="24" width="24"/><path d="M19.5,6c-1.31,0-2.37,1.01-2.48,2.3C15.14,7.8,14.18,6.5,12,6.5c-2.19,0-3.14,1.3-5.02,1.8C6.87,7.02,5.81,6,4.5,6 C3.12,6,2,7.12,2,8.5V9c0,6,3.6,7.81,6.52,7.98C9.53,17.62,10.72,18,12,18s2.47-0.38,3.48-1.02C18.4,16.81,22,15,22,9V8.5 C22,7.12,20.88,6,19.5,6z M3.5,9V8.5c0-0.55,0.45-1,1-1s1,0.45,1,1v3c0,1.28,0.38,2.47,1.01,3.48C4.99,14.27,3.5,12.65,3.5,9z M20.5,9c0,3.65-1.49,5.27-3.01,5.98c0.64-1.01,1.01-2.2,1.01-3.48v-3c0-0.55,0.45-1,1-1s1,0.45,1,1V9z M10.69,10.48 c-0.44,0.26-0.96,0.56-1.69,0.76V10.2c0.48-0.17,0.84-0.38,1.18-0.58C10.72,9.3,11.23,9,12,9s1.27,0.3,1.8,0.62 c0.34,0.2,0.71,0.42,1.2,0.59v1.04c-0.75-0.21-1.26-0.51-1.71-0.78C12.83,10.2,12.49,10,12,10C11.51,10,11.16,10.2,10.69,10.48z"/></svg>',title:"\u5FEB\u7BE9\u9662\u6240"},()=>t.NS1Test.setVisible(!t.NS1Test.getVisible()))]}),i.on("singleclick",s=>{i.forEachFeatureAtPixel(s.pixel,l=>{var d,u;let a=l;a.get("VILLNAME")&&i.getView().get("resolution")<40&&(a.setStyle(A.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),o.village&&((d=o.village)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=o.village)==null||u.setStyle(A.bind(this))),o.village=a)},{layerFilter:l=>l===t.village}),i.forEachFeatureAtPixel(s.pixel,l=>{var u,k;let a=l,d=i.getView().get("resolution");a.setStyle(S.call(this,a,d,{stroke:new f({color:"#000",width:3})})),o.town&&((u=o.town)==null?void 0:u.ol_uid)!==a.ol_uid&&((k=o.town)==null||k.setStyle(S.bind(this))),o.town=a},{layerFilter:l=>l===t.town}),i.forEachFeatureAtPixel(s.pixel,l=>{var d,u;let a=l;a.setStyle(q.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),o.county&&((d=o.county)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=o.county)==null||u.setStyle(S.bind(this))),o.county=a},{layerFilter:l=>l===t.county})})},methods:{}}),Pe={class:"map",ref:"map"},ze={class:"loading",ref:"loading"};function je(o,e,r,n,t,i){return y(),M(I,null,[c("div",Pe,null,512),c("div",ze,null,512)],64)}var Be=$(Fe,[["render",je],["__scopeId","data-v-5d74d88c"]]);const Ue=m({components:{templateMain:Te,Map:Be},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function He(o,e,r,n,t,i){const s=w("templateMain"),l=w("router-view"),a=w("Map");return y(),M(I,null,[v(s),v(l,{class:"wrapper"}),v(a)],64)}var Ge=$(Ue,[["render",He]]);function We(){return{}}var Ye={},De={};const Re=Symbol(),Je=re({state:We,getters:Ye,mutations:De}),Ke="modulepreload",F={},Qe="/",Xe=function(e,r){return!r||r.length===0?e():Promise.all(r.map(n=>{if(n=`${Qe}${n}`,n in F)return;F[n]=!0;const t=n.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const s=document.createElement("link");if(s.rel=t?"stylesheet":Ke,t||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),t)return new Promise((l,a)=>{s.addEventListener("load",l),s.addEventListener("error",a)})})).then(()=>e())},Ze=[{name:"Home",path:"/",component:()=>Xe(()=>import("./index.5c92c2b3.js"),["assets/index.5c92c2b3.js","assets/vendor.9113e423.js"])}],et=se({history:ie(),routes:Ze});var tt={install(o){o.use(Je,Re),o.use(et)}};ae(Ge).use(tt).mount("#app");export{$ as _};
