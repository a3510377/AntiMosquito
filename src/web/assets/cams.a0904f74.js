var p=Object.defineProperty,_=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var u=(e,t,s)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t)=>{for(var s in t||(t={}))f.call(t,s)&&u(e,s,t[s]);if(c)for(var s of c(t))g.call(t,s)&&u(e,s,t[s]);return e},m=(e,t)=>_(e,y(t));import{_ as C,d as x,H as $,c as d,h as k,t as i,e as n,F as I,i as O,b as r}from"./index.29534219.js";import{a as D}from"./config.2f2ca7ea.js";const E=x({data(){return{timeOut:void 0,ready:!1,data:{},vReady:""}},components:{HeaderMain:$},beforeUnmount(){this.closeTimeOut()},mounted(){let e=".".repeat(4);this.timeOut=setInterval(()=>{this.vReady=this.vReady.length>=e.length?e[0]:e.substring(0,this.vReady.length+1)},500);let t=new EventSource(`${D}/api/v1/postImg/imgs`);t.addEventListener("addImg",({data:s})=>{let o=JSON.parse(s);this.data[o.id]=m(h({},o),{show:this.data[o.id]===void 0?!1:this.data[o.id].show})}),t.addEventListener("open",()=>this.ready=!0,!1),t.addEventListener("close",()=>this.ready=!1,!1),t.addEventListener("deleteImg",({data:s})=>delete this.data[s])},methods:{closeTimeOut(){this.timeOut&&clearInterval(this.timeOut)}}}),w={class:"cams"},L={key:0,class:"errorText not-ready"},R=["textContent"],b={key:1,class:"content"},A=["src","onClick"],T=["textContent"],B=["textContent"],F=["textContent"];function N(e,t,s,o,S,H){return r(),d("div",w,[Object.keys(e.data).length<=0||!e.ready?(r(),d("div",L,[k(i(e.ready?"\u5C1A\u7121\u6578\u64DA":"\u9023\u7DDA\u4E2D")+" ",1),n("p",{textContent:i(e.vReady)},null,8,R)])):(r(),d("div",b,[(r(!0),d(I,null,O(e.data,(a,v)=>{var l;return r(),d("div",{key:v,class:"cam"},[n("img",{src:a.show?a.fImg:a.img,onClick:U=>a.show=!a.show},null,8,A),n("div",null,[n("p",{textContent:i(`ID: ${a.id||""}`)},null,8,T),n("p",{textContent:i(`\u540D\u7A31: ${a.user.name||""}`)},null,8,B),n("p",{textContent:i(`\u6578\u91CF: ${((l=a==null?void 0:a.data)==null?void 0:l.contours)||0}`)},null,8,F)])])}),128))]))])}var M=C(E,[["render",N],["__scopeId","data-v-20d861c7"]]);export{M as default};
