var T=Object.defineProperty;var M=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var S=(e,t,r)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))P.call(t,r)&&S(e,r,t[r]);if(M)for(var r of M(t))V.call(t,r)&&S(e,r,t[r]);return e};import{d as w,r as h,c as x,a as l,b as g,w as F,p as N,e as E,o as m,f as j,g as q,h as z,F as U,V as B,i as H,G as W,P as G,M as R,l as b,s as y,T as $,S as f,j as u,k as _,m as k,C as Y,n as D,A as J,q as K,t as Q,u as X,v as Z,x as ee}from"./vendor.808f496e.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};te();var v=(e,t)=>{const r=e.__vccOpts||e;for(const[s,n]of t)r[s]=n;return r};const oe=w({data(){return{}}}),d=e=>(N("data-v-4eec8a20"),e=e(),E(),e),ne={class:"menu flex flex-item-center"},re={class:"list flex flex-center"},se=j("\u6587\u6A94"),ie=d(()=>l("div",null,"2",-1)),ae=d(()=>l("div",null,"3",-1)),le=d(()=>l("div",null,"4",-1)),ce=d(()=>l("div",null,"5",-1)),de=d(()=>l("div",null,"6",-1)),fe=d(()=>l("div",null,"7",-1)),ue=d(()=>l("div",null,"8",-1)),_e=d(()=>l("div",null,"9",-1)),pe=d(()=>l("div",null,"10",-1)),he=d(()=>l("div",{class:"openMenu flex flex-item-center"},[l("div",{class:"style"})],-1));function we(e,t,r,s,n,i){const o=h("router-link");return m(),x("div",ne,[l("div",re,[l("div",null,[g(o,{to:"/"},{default:F(()=>[se]),_:1})]),ie,ae,le,ce,de,fe,ue,_e,pe]),he])}var ge=v(oe,[["render",we],["__scopeId","data-v-4eec8a20"]]);const me=w({components:{Menu:ge}}),ve=e=>(N("data-v-1aed7f03"),e=e(),E(),e),xe={id:"header",class:"flex flex-item-center"},be=ve(()=>l("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function ye(e,t,r,s,n,i){const o=h("Menu");return m(),x("header",xe,[be,g(o)])}var $e=v(me,[["render",ye],["__scopeId","data-v-1aed7f03"]]);const ke=w({components:{HeaderMain:$e}});function Me(e,t,r,s,n,i){const o=h("HeaderMain");return m(),q(o)}var Se=v(ke,[["render",Me]]);const Ae="https://antimosquito.a102009102009.repl.co";const Ne=w({data(){return{data:{},oldClick:void 0}},async mounted(){let e=this.data=(await z({url:`${Ae}/api/v1/data`,method:"GET"})).data,t=new U,r=!1,s=new B({center:H([120.221507,23.000694]),zoom:12}),n=new W({projection:s.getProjection()});n.setTracking(!0),n.on("error",o=>console.log(o.message)),n.on("change:position",function(){let o=n.getPosition();t.setGeometry(o?new G(o):void 0),r||(s.setCenter(o),r=!0)});let i=new R({target:this.$refs.map,layers:[new b({source:new y({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new $}),style:this.villageStyle.bind(this),zIndex:50}),new b({source:new y({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new $}),style:(o,c)=>{var a;if(c>40&&c<180){let p=0;return Object.entries(((a=e==null?void 0:e[o.get("COUNTYNAME")])==null?void 0:a[o.get("TOWNNAME")])||{}).forEach(([Re,L])=>L.forEach(I=>p+=I.mosquitos)),new f({stroke:new u({color:"#ff0000",width:1}),fill:new _({color:this.setFillColor(~~(p/50))}),text:new k({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${o.get("TOWNNAME")}
${p||""}`})})}return c<=180?new f({stroke:new u({color:"#ff0000",width:1})}):new f({fill:new _({color:"#fff"}),stroke:new u({color:"#ff00004a",width:1})})},zIndex:100}),new b({source:new y({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new $}),style:(o,c)=>new f({stroke:new u({color:"#0000ff",width:1}),fill:new _({color:"#ffffff00"}),text:new k({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:c>180?o.get("COUNTYNAME")||"":void 0})}),zIndex:150}),new b({source:new y({features:[t]}),style:new f({image:new Y({radius:6,fill:new _({color:"#3399CC"}),stroke:new u({color:"#fff",width:2})})}),zIndex:200})],view:s,controls:D({attribution:!1}).extend([new J({collapsible:!1,collapsed:!0})])});i.on("singleclick",o=>{i.forEachFeatureAtPixel(o.pixel,c=>{var p;let a=c;a.get("VILLNAME")?(a._chick=!a._chick,a.setStyle(this.villageStyle(a,void 0,{stroke:new u({color:"#000",width:3})})),this.oldClick!==null&&((p=this.oldClick)==null||p.setStyle(this.villageStyle(this.oldClick))),this.oldClick=a):a.get("VILLNAME")&&(a._chick=!1)})})},methods:{setFillColor(e){let t="#fff";return e>50?t="#470115":e>20?t="#6f006d":e>10?t="#a4005b":e>5?t="#d00b33":e>3?t="#e75033":e>1?t="#ffa133":e>0&&(t="#e3d738"),t},villageStyle(e,t,r){var n,i,o;if(t&&t>40)return new f({fill:new _({color:"#ffffff"})});let s=0;return(((o=(i=(n=this.data)==null?void 0:n[e.get("COUNTYNAME")])==null?void 0:i[e.get("TOWNNAME")])==null?void 0:o[e.get("VILLNAME")])||[]).forEach(c=>s+=c.mosquitos),new f(A({stroke:new u({color:"#000",width:1}),fill:new _({color:this.setFillColor(~~(s/10))}),text:new k({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new _({color:"#000"}),text:`${e.get("VILLNAME")||""}
${s||""}`})},r))}}}),Ee={class:"map",ref:"map"};function Ce(e,t,r,s,n,i){return m(),x("div",Ee,null,512)}var Oe=v(Ne,[["render",Ce],["__scopeId","data-v-dfc3acb0"]]);const Le=w({components:{templateMain:Se,Map:Oe},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Ie(e,t,r,s,n,i){const o=h("templateMain"),c=h("router-views"),a=h("Map");return m(),x(K,null,[g(o),g(c),g(a)],64)}var C=v(Le,[["render",Ie]]),Te=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:C});function Pe(){return{}}var Ve={},Fe={};const je=Symbol(),qe=Q({state:Pe,getters:Ve,mutations:Fe}),ze="modulepreload",O={},Ue="/",Be=function(t,r){return!r||r.length===0?t():Promise.all(r.map(s=>{if(s=`${Ue}${s}`,s in O)return;O[s]=!0;const n=s.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":ze,n||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),n)return new Promise((c,a)=>{o.addEventListener("load",c),o.addEventListener("error",a)})})).then(()=>t())},He=[{name:"Home",path:"/",component:()=>Be(()=>Promise.resolve().then(function(){return Te}),void 0)}],We=X({history:Z(),routes:He});var Ge={install(e){e.use(qe,je),e.use(We)}};ee(C).use(Ge).mount("#app");
