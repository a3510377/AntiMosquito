var F=Object.defineProperty;var V=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var O=(o,e,i)=>e in o?F(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i,g=(o,e)=>{for(var i in e||(e={}))j.call(e,i)&&O(o,i,e[i]);if(V)for(var i of V(e))B.call(e,i)&&O(o,i,e[i]);return o};import{d as m,r as w,c as M,a as c,b as v,w as U,p as T,e as L,o as y,f as H,g as G,S as h,h as f,F as _,T as S,i as W,j as D,k as Y,V as R,l as J,G as K,P as Z,m as Q,n as x,s as b,q as C,t as X,C as ee,M as te,u as oe,v as ne,O as se,x as z,y as ie,z as re,A as ae,B as le}from"./vendor.9113e423.js";const ce=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}};ce();var $=(o,e)=>{const i=o.__vccOpts||o;for(const[n,t]of e)i[n]=t;return i};const de=m({data(){return{}}}),p=o=>(T("data-v-4eec8a20"),o=o(),L(),o),ue={class:"menu flex flex-item-center"},fe={class:"list flex flex-center"},pe=H("\u6587\u6A94"),he=p(()=>c("div",null,"2",-1)),_e=p(()=>c("div",null,"3",-1)),we=p(()=>c("div",null,"4",-1)),ge=p(()=>c("div",null,"5",-1)),me=p(()=>c("div",null,"6",-1)),ve=p(()=>c("div",null,"7",-1)),ye=p(()=>c("div",null,"8",-1)),xe=p(()=>c("div",null,"9",-1)),be=p(()=>c("div",null,"10",-1)),$e=p(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function ke(o,e,i,n,t,r){const s=w("router-link");return y(),M("div",ue,[c("div",fe,[c("div",null,[v(s,{to:"/"},{default:U(()=>[pe]),_:1})]),he,_e,we,ge,me,ve,ye,xe,be]),$e])}var Me=$(de,[["render",ke],["__scopeId","data-v-4eec8a20"]]);const Ee=m({components:{Menu:Me}}),Se=o=>(T("data-v-1aed7f03"),o=o(),L(),o),Ce={id:"header",class:"flex flex-item-center"},Ne=Se(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Ae(o,e,i,n,t,r){const s=w("Menu");return y(),M("header",Ce,[Ne,v(s)])}var Ve=$(Ee,[["render",Ae],["__scopeId","data-v-1aed7f03"]]);const Oe=m({components:{HeaderMain:Ve}});function Te(o,e,i,n,t,r){const s=w("HeaderMain");return y(),G(s)}var Le=$(Oe,[["render",Te]]);const ze="https://antimosquito.a102009102009.repl.co";function N(o){let e="#fff";return o>50?e="#470115":o>20?e="#6f006d":o>10?e="#a4005b":o>5?e="#d00b33":o>3?e="#e75033":o>1?e="#ffa133":o>0&&(e="#e3d738"),e}function I(o,e,i){var r;let n=o,t=0;if(n.mosquitos===void 0){let s=(r=this.data)==null?void 0:r[n.get("COUNTYNAME")];typeof s=="object"&&Object.entries(s).forEach(([l,a])=>Object.entries(a).forEach(([d,u])=>u.forEach(k=>t+=k.mosquitos)))}return t=n.mosquitos||(n.mosquitos=t),e&&e>180?new h(g({stroke:new f({color:"#0000ff",width:1}),fill:new _({color:N(~~(t/100))}),text:new S({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("COUNTYNAME")}
${t||""}`})},i)):new h(g({stroke:new f({color:"#0000ff",width:1}),fill:new _({color:"#ffffff00"})},i))}function E(o,e,i){var t,r;let n=o;if(e&&e>40&&e<180){let s=0;return n.mosquitos===void 0&&Object.entries(((r=(t=this.data)==null?void 0:t[n.get("COUNTYNAME")])==null?void 0:r[n.get("TOWNNAME")])||{}).forEach(([l,a])=>a.forEach(d=>s+=d.mosquitos)),s=n.mosquitos||(n.mosquitos=s),new h(g({stroke:new f({color:"#ff0000",width:1}),fill:new _({color:N(~~(s/50))}),text:new S({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("TOWNNAME")}
${s||""}`})},i))}return e&&e<=180?new h({stroke:new f({color:"#ff0000",width:1})}):new h({fill:new _({color:"#fff"}),stroke:new f({color:"#ff00004a",width:1})})}function A(o,e,i){var r,s,l;let n=o;if(e&&e>40)return new h({fill:new _({color:"#ffffff"})});let t=0;return n.mosquitos===void 0&&(((l=(s=(r=this.data)==null?void 0:r[n.get("COUNTYNAME")])==null?void 0:s[n.get("TOWNNAME")])==null?void 0:l[n.get("VILLNAME")])||[]).forEach(a=>t+=a.mosquitos),t=n.mosquitos||(n.mosquitos=t),new h(g({stroke:new f({color:"#000",width:1}),fill:new _({color:N(~~(t/10))}),text:new S({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new _({color:"#000"}),text:`${n.get("VILLNAME")||""}
${t||""}`})},i))}class P{constructor(e={},i){this.options=e,this.clickEvent=i,this.options.show===void 0&&(this.options.show=!0)}makeButton(){var i;const e=document.createElement("button");return this.options.show||(e.style.display="none"),e.innerHTML=this.options.text||"",e.title=this.options.title||"",e.type="button",e.addEventListener("click",(i=this.clickEvent)==null?void 0:i.bind(this),!1),e}}class Ie{constructor(e={}){var n,t,r;const i=document.createElement("div");(n=e.control)==null||n.map(s=>s==null?void 0:s.makeButton()).forEach(s=>{console.log(s),i.append(s)}),(r=(t=e.target)==null?void 0:t.querySelector(".ol-zoom.ol-unselectable.ol-control"))==null||r.append(i)}}const Pe=m({data(){return{data:null,layers:{}}},setup(){const o=W(null),e=D({village:void 0,town:void 0,county:void 0});let i=new Y,n=!1,t=new R({center:J([120.221507,23.000694]),zoom:12}),r=new K({projection:t.getProjection()});return r.setTracking(!0),r.on("error",s=>console.log(s.message)),r.on("change:position",function(){let s=r.getPosition();i.setGeometry(s?new Z(s):void 0),n||(t.setCenter(s),n=!0)}),{oldClick:e,positionFeature:i,map:o,appView:t,geolocation:r}},async mounted(){let o=this.oldClick,e=this.positionFeature,i=this.map,n=this.appView;this.data=(await Q({url:`${ze}/api/v1/data`,method:"GET"})).data;let t=this.layers={village:new x({source:new b({url:"/data/topo/village/20210324.json",format:new C}),style:A.bind(this),zIndex:50}),town:new x({source:new b({url:"/data/topo/town/city.topo.json",format:new C}),style:E.bind(this),zIndex:100}),county:new x({source:new b({url:"/data/topo/county/20200820.json",format:new C}),style:I.bind(this),zIndex:150}),NS1Test:new x({source:new b({url:"/data/ns1hosp_20160603.json",format:new X}),zIndex:200}),locationPoint:new x({source:new b({features:[e]}),style:new h({image:new ee({radius:6,fill:new _({color:"#3399CC"}),stroke:new f({color:"#fff",width:2})})}),zIndex:250})},r=new te({controls:oe(),target:i,layers:[new ne({source:new se,zIndex:0}),t.village,t.town,t.county,t.NS1Test,t.locationPoint],view:n});new Ie({target:i,control:[new P({target:i,text:'<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="1.375em" viewBox="0 0 24 24" width="1.375em" fill="#fff"><rect fill="none" height="24" width="24"/><path d="M19.5,6c-1.31,0-2.37,1.01-2.48,2.3C15.14,7.8,14.18,6.5,12,6.5c-2.19,0-3.14,1.3-5.02,1.8C6.87,7.02,5.81,6,4.5,6 C3.12,6,2,7.12,2,8.5V9c0,6,3.6,7.81,6.52,7.98C9.53,17.62,10.72,18,12,18s2.47-0.38,3.48-1.02C18.4,16.81,22,15,22,9V8.5 C22,7.12,20.88,6,19.5,6z M3.5,9V8.5c0-0.55,0.45-1,1-1s1,0.45,1,1v3c0,1.28,0.38,2.47,1.01,3.48C4.99,14.27,3.5,12.65,3.5,9z M20.5,9c0,3.65-1.49,5.27-3.01,5.98c0.64-1.01,1.01-2.2,1.01-3.48v-3c0-0.55,0.45-1,1-1s1,0.45,1,1V9z M10.69,10.48 c-0.44,0.26-0.96,0.56-1.69,0.76V10.2c0.48-0.17,0.84-0.38,1.18-0.58C10.72,9.3,11.23,9,12,9s1.27,0.3,1.8,0.62 c0.34,0.2,0.71,0.42,1.2,0.59v1.04c-0.75-0.21-1.26-0.51-1.71-0.78C12.83,10.2,12.49,10,12,10C11.51,10,11.16,10.2,10.69,10.48z"/></svg>',title:"\u5FEB\u7BE9\u9662\u6240"},()=>t.NS1Test.setVisible(!t.NS1Test.getVisible())),new P({target:i,text:'<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#fff"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>',title:"\u5B9A\u4F4D\u5230\u6211",show:!!this.geolocation.getPosition()},()=>{r.getView().setZoom(12),r.getView().animate({center:this.geolocation.getPosition(),duration:1})})]}),r.on("singleclick",s=>{r.forEachFeatureAtPixel(s.pixel,l=>{var d,u;let a=l;a.get("VILLNAME")&&r.getView().get("resolution")<40&&(a.setStyle(A.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),o.village&&((d=o.village)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=o.village)==null||u.setStyle(A.bind(this))),o.village=a)},{layerFilter:l=>l===t.village}),r.forEachFeatureAtPixel(s.pixel,l=>{var u,k;let a=l,d=r.getView().get("resolution");a.setStyle(E.call(this,a,d,{stroke:new f({color:"#000",width:3})})),o.town&&((u=o.town)==null?void 0:u.ol_uid)!==a.ol_uid&&((k=o.town)==null||k.setStyle(E.bind(this))),o.town=a},{layerFilter:l=>l===t.town}),r.forEachFeatureAtPixel(s.pixel,l=>{var d,u;let a=l;a.setStyle(I.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),o.county&&((d=o.county)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=o.county)==null||u.setStyle(E.bind(this))),o.county=a},{layerFilter:l=>l===t.county})})},methods:{}}),qe={class:"map",ref:"map"},Fe={class:"loading",ref:"loading"};function je(o,e,i,n,t,r){return y(),M(z,null,[c("div",qe,null,512),c("div",Fe,null,512)],64)}var Be=$(Pe,[["render",je],["__scopeId","data-v-36d63892"]]);const Ue=m({components:{templateMain:Le,Map:Be},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function He(o,e,i,n,t,r){const s=w("templateMain"),l=w("router-view"),a=w("Map");return y(),M(z,null,[v(s),v(l,{class:"wrapper"}),v(a)],64)}var Ge=$(Ue,[["render",He]]);function We(){return{}}var De={},Ye={};const Re=Symbol(),Je=ie({state:We,getters:De,mutations:Ye}),Ke="modulepreload",q={},Ze="/",Qe=function(e,i){return!i||i.length===0?e():Promise.all(i.map(n=>{if(n=`${Ze}${n}`,n in q)return;q[n]=!0;const t=n.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${r}`))return;const s=document.createElement("link");if(s.rel=t?"stylesheet":Ke,t||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),t)return new Promise((l,a)=>{s.addEventListener("load",l),s.addEventListener("error",a)})})).then(()=>e())},Xe=[{name:"Home",path:"/",component:()=>Qe(()=>import("./index.028fbf63.js"),["assets/index.028fbf63.js","assets/vendor.9113e423.js"])}],et=re({history:ae(),routes:Xe});var tt={install(o){o.use(Je,Re),o.use(et)}};le(Ge).use(tt).mount("#app");export{$ as _};
