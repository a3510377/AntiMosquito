var T=Object.defineProperty;var N=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var O=(o,e,r)=>e in o?T(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,$=(o,e)=>{for(var r in e||(e={}))P.call(e,r)&&O(o,r,e[r]);if(N)for(var r of N(e))V.call(e,r)&&O(o,r,e[r]);return o};import{d as m,r as g,c as k,a as l,b as v,w as j,p as q,e as I,o as y,f as F,g as U,h as z,F as B,V as H,i as W,G,P as Y,l as S,s as M,T as E,S as h,C as R,j as w,k as _,M as D,m as J,A as K,n as C,q as Q,t as X,u as Z,v as ee,x as te}from"./vendor.20b1c3b6.js";const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}};oe();var b=(o,e)=>{const r=o.__vccOpts||o;for(const[t,n]of e)r[t]=n;return r};const ne=m({data(){return{}}}),u=o=>(q("data-v-4eec8a20"),o=o(),I(),o),re={class:"menu flex flex-item-center"},se={class:"list flex flex-center"},ie=F("\u6587\u6A94"),ae=u(()=>l("div",null,"2",-1)),le=u(()=>l("div",null,"3",-1)),ce=u(()=>l("div",null,"4",-1)),de=u(()=>l("div",null,"5",-1)),fe=u(()=>l("div",null,"6",-1)),ue=u(()=>l("div",null,"7",-1)),pe=u(()=>l("div",null,"8",-1)),_e=u(()=>l("div",null,"9",-1)),he=u(()=>l("div",null,"10",-1)),we=u(()=>l("div",{class:"openMenu flex flex-item-center"},[l("div",{class:"style"})],-1));function ge(o,e,r,t,n,i){const s=g("router-link");return y(),k("div",re,[l("div",se,[l("div",null,[v(s,{to:"/"},{default:j(()=>[ie]),_:1})]),ae,le,ce,de,fe,ue,pe,_e,he]),we])}var me=b(ne,[["render",ge],["__scopeId","data-v-4eec8a20"]]);const ve=m({components:{Menu:me}}),ye=o=>(q("data-v-1aed7f03"),o=o(),I(),o),be={id:"header",class:"flex flex-item-center"},xe=ye(()=>l("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function $e(o,e,r,t,n,i){const s=g("Menu");return y(),k("header",be,[xe,v(s)])}var ke=b(ve,[["render",$e],["__scopeId","data-v-1aed7f03"]]);const Se=m({components:{HeaderMain:ke}});function Me(o,e,r,t,n,i){const s=g("HeaderMain");return y(),U(s)}var Ee=b(Se,[["render",Me]]);const Ce="https://antimosquito.a102009102009.repl.co";const Ae=m({data(){return{data:{},oldClick:{village:void 0,town:void 0}}},async mounted(){this.data=(await z({url:`${Ce}/api/v1/data`,method:"GET"})).data;let o=new B,e=!1,r=new H({center:W([120.221507,23.000694]),zoom:12}),t=new G({projection:r.getProjection()});t.setTracking(!0),t.on("error",c=>console.log(c.message)),t.on("change:position",function(){let c=t.getPosition();o.setGeometry(c?new Y(c):void 0),e||(r.setCenter(c),e=!0)});let n=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/cunli/topo/20210324.json",format:new E}),style:this.villageStyle.bind(this),zIndex:50}),i=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/city/city.topo.json",format:new E}),style:this.townStyle.bind(this),zIndex:100}),s=new S({source:new M({url:"https://kiang.github.io/taiwan_basecode/county/topo/20200820.json",format:new E}),style:this.countyStyle.bind(this),zIndex:150}),f=new S({source:new M({features:[o]}),style:new h({image:new R({radius:6,fill:new w({color:"#3399CC"}),stroke:new _({color:"#fff",width:2})})}),zIndex:200}),a=new D({target:this.$refs.map,layers:[n,i,s,f],view:r,controls:J({attribution:!1}).extend([new K({collapsible:!1,collapsed:!0})])});a.on("singleclick",c=>{a.forEachFeatureAtPixel(c.pixel,p=>{var x;let d=p;d.get("VILLNAME")&&a.getView().get("resolution")<40&&(d.setStyle(this.villageStyle(d,void 0,{stroke:new _({color:"#000",width:3})})),this.oldClick.village&&((x=this.oldClick.village)==null||x.setStyle(this.villageStyle)),this.oldClick.village=d)},{layerFilter:p=>p===n}),a.forEachFeatureAtPixel(c.pixel,p=>{var A;let d=p,x=a.getView().get("resolution");d.setStyle(this.townStyle(d,x,{stroke:new _({color:"#000",width:3})})),this.oldClick.town&&!Object.is(this.oldClick,d)&&((A=this.oldClick.town)==null||A.setStyle(this.townStyle)),this.oldClick.town=d},{layerFilter:p=>p===i})})},methods:{setFillColor(o){let e="#fff";return o>50?e="#470115":o>20?e="#6f006d":o>10?e="#a4005b":o>5?e="#d00b33":o>3?e="#e75033":o>1?e="#ffa133":o>0&&(e="#e3d738"),e},countyStyle(o,e,r){var i;let t=o,n=0;if(t.mosquitos===void 0){let s=(i=this.data)==null?void 0:i[t.get("COUNTYNAME")];typeof s=="object"&&Object.entries(s).forEach(([f,a])=>Object.entries(a).forEach(([c,p])=>p.forEach(d=>n+=d.mosquitos)))}return n=t.mosquitos||(t.mosquitos=n),new h($({stroke:new _({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"}),text:new C({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:e&&e>180?t.get("COUNTYNAME")+n||"":void 0})},r))},townStyle(o,e,r){var n,i;let t=o;if(e&&e>40&&e<180){let s=0;return t.mosquitos===void 0&&Object.entries(((i=(n=this.data)==null?void 0:n[t.get("COUNTYNAME")])==null?void 0:i[t.get("TOWNNAME")])||{}).forEach(([f,a])=>a.forEach(c=>s+=c.mosquitos)),s=t.mosquitos||(t.mosquitos=s),new h($({stroke:new _({color:"#ff0000",width:1}),fill:new w({color:this.setFillColor(~~(s/50))}),text:new C({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${t.get("TOWNNAME")}
${s||""}`})},r))}return e&&e<=180?new h({stroke:new _({color:"#ff0000",width:1})}):new h({fill:new w({color:"#fff"}),stroke:new _({color:"#ff00004a",width:1})})},villageStyle(o,e,r){var i,s,f;let t=o;if(e&&e>40)return new h({fill:new w({color:"#ffffff"})});let n=0;return t.mosquitos===void 0&&(((f=(s=(i=this.data)==null?void 0:i[t.get("COUNTYNAME")])==null?void 0:s[t.get("TOWNNAME")])==null?void 0:f[t.get("VILLNAME")])||[]).forEach(a=>n+=a.mosquitos),n=t.mosquitos||(t.mosquitos=n),new h($({stroke:new _({color:"#000",width:1}),fill:new w({color:this.setFillColor(~~(n/10))}),text:new C({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${t.get("VILLNAME")||""}
${n||""}`})},r))}}}),Ne={class:"map",ref:"map"};function Oe(o,e,r,t,n,i){return y(),k("div",Ne,null,512)}var qe=b(Ae,[["render",Oe],["__scopeId","data-v-1ca1e863"]]);const Ie=m({components:{templateMain:Ee,Map:qe},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Le(o,e,r,t,n,i){const s=g("templateMain"),f=g("router-view"),a=g("Map");return y(),k(Q,null,[v(s),v(f,{class:"wrapper"}),v(a)],64)}var Te=b(Ie,[["render",Le]]);function Pe(){return{}}var Ve={},je={};const Fe=Symbol(),Ue=X({state:Pe,getters:Ve,mutations:je}),ze="modulepreload",L={},Be="/",He=function(e,r){return!r||r.length===0?e():Promise.all(r.map(t=>{if(t=`${Be}${t}`,t in L)return;L[t]=!0;const n=t.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${i}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":ze,n||(s.as="script",s.crossOrigin=""),s.href=t,document.head.appendChild(s),n)return new Promise((f,a)=>{s.addEventListener("load",f),s.addEventListener("error",a)})})).then(()=>e())},We=[{name:"Home",path:"/",component:()=>He(()=>import("./index.f146c2b8.js"),["assets/index.f146c2b8.js","assets/vendor.20b1c3b6.js"])}],Ge=Z({history:ee(),routes:We});var Ye={install(o){o.use(Ue,Fe),o.use(Ge)}};te(Te).use(Ye).mount("#app");export{b as _};
