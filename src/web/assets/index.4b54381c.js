var F=Object.defineProperty;var T=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var C=(e,o,i)=>o in e?F(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,g=(e,o)=>{for(var i in o||(o={}))j.call(o,i)&&C(e,i,o[i]);if(T)for(var i of T(o))z.call(o,i)&&C(e,i,o[i]);return e};import{d as m,r as h,c as k,a as c,b as v,w as U,p as I,e as V,o as y,f as B,g as G,S as _,h as f,F as w,T as N,i as H,j as W,k as Y,V as D,l as R,G as J,P as K,m as Q,n as x,s as b,q as E,t as X,C as Z,M as ee,u as te,O as oe,v as ne,A as re,x as L,y as se,z as ie,B as ae,D as le}from"./vendor.3f617bf1.js";const ce=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}};ce();var $=(e,o)=>{const i=e.__vccOpts||e;for(const[n,t]of o)i[n]=t;return i};const de=m({data(){return{}}}),p=e=>(I("data-v-4eec8a20"),e=e(),V(),e),ue={class:"menu flex flex-item-center"},fe={class:"list flex flex-center"},pe=B("\u6587\u6A94"),_e=p(()=>c("div",null,"2",-1)),we=p(()=>c("div",null,"3",-1)),he=p(()=>c("div",null,"4",-1)),ge=p(()=>c("div",null,"5",-1)),me=p(()=>c("div",null,"6",-1)),ve=p(()=>c("div",null,"7",-1)),ye=p(()=>c("div",null,"8",-1)),xe=p(()=>c("div",null,"9",-1)),be=p(()=>c("div",null,"10",-1)),$e=p(()=>c("div",{class:"openMenu flex flex-item-center"},[c("div",{class:"style"})],-1));function Se(e,o,i,n,t,s){const r=h("router-link");return y(),k("div",ue,[c("div",fe,[c("div",null,[v(r,{to:"/"},{default:U(()=>[pe]),_:1})]),_e,we,he,ge,me,ve,ye,xe,be]),$e])}var ke=$(de,[["render",Se],["__scopeId","data-v-4eec8a20"]]);const Me=m({components:{Menu:ke}}),Ne=e=>(I("data-v-1aed7f03"),e=e(),V(),e),Ee={id:"header",class:"flex flex-item-center"},Ae=Ne(()=>c("a",{href:"/",class:"title"},"\u868A\u5B50",-1));function Oe(e,o,i,n,t,s){const r=h("Menu");return y(),k("header",Ee,[Ae,v(r)])}var Te=$(Me,[["render",Oe],["__scopeId","data-v-1aed7f03"]]);const Ce=m({components:{HeaderMain:Te}});function Ie(e,o,i,n,t,s){const r=h("HeaderMain");return y(),G(r)}var Ve=$(Ce,[["render",Ie]]);const Le="https://antimosquito.a102009102009.repl.co";function A(e){let o="#fff";return e>50?o="#470115":e>20?o="#6f006d":e>10?o="#a4005b":e>5?o="#d00b33":e>3?o="#e75033":e>1?o="#ffa133":e>0&&(o="#e3d738"),o}function q(e,o,i){var s;let n=e,t=0;if(n.mosquitos===void 0){let r=(s=this.data)==null?void 0:s[n.get("COUNTYNAME")];typeof r=="object"&&Object.entries(r).forEach(([l,a])=>Object.entries(a).forEach(([d,u])=>u.forEach(S=>t+=S.mosquitos)))}return t=n.mosquitos||(n.mosquitos=t),o&&o>180?new _(g({stroke:new f({color:"#0000ff",width:1}),fill:new w({color:A(~~(t/100))}),text:new N({font:"20px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("COUNTYNAME")}
${t||""}`})},i)):new _(g({stroke:new f({color:"#0000ff",width:1}),fill:new w({color:"#ffffff00"})},i))}function M(e,o,i){var t,s;let n=e;if(o&&o>40&&o<180){let r=0;return n.mosquitos===void 0&&Object.entries(((s=(t=this.data)==null?void 0:t[n.get("COUNTYNAME")])==null?void 0:s[n.get("TOWNNAME")])||{}).forEach(([l,a])=>a.forEach(d=>r+=d.mosquitos)),r=n.mosquitos||(n.mosquitos=r),new _(g({stroke:new f({color:"#ff0000",width:1}),fill:new w({color:A(~~(r/50))}),text:new N({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",text:`${n.get("TOWNNAME")}
${r||""}`})},i))}return o&&o<=180?new _({stroke:new f({color:"#ff0000",width:1})}):new _({fill:new w({color:"#fff"}),stroke:new f({color:"#ff00004a",width:1})})}function O(e,o,i){var s,r,l;let n=e;if(o&&o>40)return new _({fill:new w({color:"#ffffff"})});let t=0;return n.mosquitos===void 0&&(((l=(r=(s=this.data)==null?void 0:s[n.get("COUNTYNAME")])==null?void 0:r[n.get("TOWNNAME")])==null?void 0:l[n.get("VILLNAME")])||[]).forEach(a=>t+=a.mosquitos),t=n.mosquitos||(n.mosquitos=t),new _(g({stroke:new f({color:"#000",width:1}),fill:new w({color:A(~~(t/10))}),text:new N({font:"14px 'Open Sans', 'Arial Unicode MS', 'sans-serif'",fill:new w({color:"#000"}),text:`${n.get("VILLNAME")||""}
${t||""}`})},i))}const qe=m({data(){return{data:null,layers:{}}},setup(){const e=H(null),o=W({village:void 0,town:void 0,county:void 0});let i=new Y,n=!1,t=new D({center:R([120.221507,23.000694]),zoom:12}),s=new J({projection:t.getProjection()});return s.setTracking(!0),s.on("error",r=>console.log(r.message)),s.on("change:position",function(){let r=s.getPosition();i.setGeometry(r?new K(r):void 0),n||(t.setCenter(r),n=!0)}),{oldClick:o,positionFeature:i,map:e,appView:t}},async mounted(){let e=this.oldClick,o=this.positionFeature,i=this.map,n=this.appView;this.data=(await Q({url:`${Le}/api/v1/data`,method:"GET"})).data;let t=this.layers={village:new x({source:new b({url:"/data/topo/village/20210324.json",format:new E}),style:O.bind(this),zIndex:50}),town:new x({source:new b({url:"/data/topo/town/city.topo.json",format:new E}),style:M.bind(this),zIndex:100}),county:new x({source:new b({url:"/data/topo/county/20200820.json",format:new E}),style:q.bind(this),zIndex:150}),NS1Test:new x({source:new b({url:"/data/ns1hosp_20160603.json",format:new X}),zIndex:200}),locationPoint:new x({source:new b({features:[o]}),style:new _({image:new Z({radius:6,fill:new w({color:"#3399CC"}),stroke:new f({color:"#fff",width:2})})}),zIndex:250})},s=new ee({target:i,layers:[new te({source:new oe,zIndex:0}),t.village,t.town,t.county,t.NS1Test,t.locationPoint],view:n,controls:ne({attribution:!1}).extend([new re({collapsible:!1,collapsed:!0})])});s.on("singleclick",r=>{s.forEachFeatureAtPixel(r.pixel,l=>{var d,u;let a=l;a.get("VILLNAME")&&s.getView().get("resolution")<40&&(a.setStyle(O.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),e.village&&((d=e.village)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=e.village)==null||u.setStyle(O.bind(this))),e.village=a)},{layerFilter:l=>l===t.village}),s.forEachFeatureAtPixel(r.pixel,l=>{var u,S;let a=l,d=s.getView().get("resolution");a.setStyle(M.call(this,a,d,{stroke:new f({color:"#000",width:3})})),e.town&&((u=e.town)==null?void 0:u.ol_uid)!==a.ol_uid&&((S=e.town)==null||S.setStyle(M.bind(this))),e.town=a},{layerFilter:l=>l===t.town}),s.forEachFeatureAtPixel(r.pixel,l=>{var d,u;let a=l;a.setStyle(q.call(this,a,void 0,{stroke:new f({color:"#000",width:3})})),e.county&&((d=e.county)==null?void 0:d.ol_uid)!==a.ol_uid&&((u=e.county)==null||u.setStyle(M.bind(this))),e.county=a},{layerFilter:l=>l===t.county})})},methods:{}}),Pe={class:"map",ref:"map"},Fe={class:"loading",ref:"loading"};function je(e,o,i,n,t,s){return y(),k(L,null,[c("div",Pe,null,512),c("button",{class:"t",onClick:o[0]||(o[0]=()=>e.layers.NS1Test.setVisible(!e.layers.NS1Test.getVisible()))}),c("div",Fe,null,512)],64)}var ze=$(qe,[["render",je],["__scopeId","data-v-7c993f4e"]]);const Ue=m({components:{templateMain:Ve,Map:ze},setup(){setTimeout(()=>{console.log(`%c Monkey %c
 awa`,"padding: 10px 42px; font-size: 32px; font-weight: 600; color: #596164; text-shadow: 2px 2px 6px #ffb199; border-radius: 10px; background-color: rgb(233, 233, 233); background-image: radial-gradient( circle at 100% 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 0 150%, rgb(233, 233, 233) 24%, white 24%, white 28%, rgb(233, 233, 233) 28%, rgb(233, 233, 233) 36%, white 36%, white 40%, transparent 40%, transparent ), radial-gradient( circle at 50% 100%, white 10%, rgb(233, 233, 233) 10%, rgb(233, 233, 233) 23%, white 23%, white 30%, rgb(233, 233, 233) 30%, rgb(233, 233, 233) 43%, white 43%, white 50%, rgb(233, 233, 233) 50%, rgb(233, 233, 233) 63%, white 63%, white 71%, transparent 71%, transparent ), radial-gradient( circle at 100% 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ), radial-gradient( circle at 0 50%, white 5%, rgb(233, 233, 233) 5%, rgb(233, 233, 233) 15%, white 15%, white 20%, rgb(233, 233, 233) 20%, rgb(233, 233, 233) 29%, white 29%, white 34%, rgb(233, 233, 233) 34%, rgb(233, 233, 233) 44%, white 44%, white 49%, transparent 49%, transparent ); background-size: 100px 50px;","padding-top: 40px;")},1e3)}});function Be(e,o,i,n,t,s){const r=h("templateMain"),l=h("router-view"),a=h("Map");return y(),k(L,null,[v(r),v(l,{class:"wrapper"}),v(a)],64)}var Ge=$(Ue,[["render",Be]]);function He(){return{}}var We={},Ye={};const De=Symbol(),Re=se({state:He,getters:We,mutations:Ye}),Je="modulepreload",P={},Ke="/",Qe=function(o,i){return!i||i.length===0?o():Promise.all(i.map(n=>{if(n=`${Ke}${n}`,n in P)return;P[n]=!0;const t=n.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const r=document.createElement("link");if(r.rel=t?"stylesheet":Je,t||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),t)return new Promise((l,a)=>{r.addEventListener("load",l),r.addEventListener("error",a)})})).then(()=>o())},Xe=[{name:"Home",path:"/",component:()=>Qe(()=>import("./index.5d52a173.js"),["assets/index.5d52a173.js","assets/vendor.3f617bf1.js"])}],Ze=ie({history:ae(),routes:Xe});var et={install(e){e.use(Re,De),e.use(Ze)}};le(Ge).use(et).mount("#app");export{$ as _};
