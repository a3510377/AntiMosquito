let loading,submitFetch=new AbortController,submit=document.getElementById("submit"),submitClick=submit.addEventListener("click",(()=>{0===submit.getElementsByClassName("loading").length&&(loading=new loadSvg(submit)),loading.start(),submitFetch.abort(),submitFetch=new AbortController;let t=document.getElementById("token").value,e=document.getElementById("wifiName").value,l=document.getElementById("wifiPassword").value;t&&e?alert("請輸入 token 或 wifiName"):fetch("/"+new URLSearchParams({}),{method:"GET",signal:submitFetch.signal,query:{token:t,wifiName:e,wifiPassword:l}}).then((t=>t.text())).then((t=>{loading.done()})).catch((t=>{if("AbortError"===t.name)return loading.stop();loading.error()}))}));class loadSvg{constructor(t){this.el=t,this.load1='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/></g><g><path d="M18,22l-0.01-6L14,12l3.99-4.01L18,2H6v6l4,4l-4,3.99V22H18z M8,7.5V4h8v3.5l-4,4L8,7.5z"/></g></svg>',this.load2='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><g><rect fill="none" height="24" width="24"/></g><g><path d="M6,2l0.01,6L10,12l-3.99,4.01L6,22h12v-6l-4-4l4-3.99V2H6z M16,16.5V20H8v-3.5l4-4L16,16.5z"/></g></svg>';let e=document.createElement("div");e.innerHTML=this.load1,e.classList.add("loading"),this.el.prepend(e)}start(){this.stop();let t=()=>this.loop=setTimeout((()=>{this.forEl((t=>t.innerHTML=this.load2)),e()}),1e3),e=()=>this.loop=setTimeout((()=>{this.forEl((t=>t.innerHTML=this.load1)),t()}),1e3);t()}stop(){clearTimeout(this.loop)}error(){this.stop(),this.forEl((t=>t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"/></svg>'))}done(){this.stop(),this.forEl((t=>t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>'))}forEl(t){for(let e of this.el.getElementsByClassName("loading"))t.bind(this)(e)}}